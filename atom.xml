<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ChenBin&#39;s Blog</title>
  
  <subtitle>ğŸ‰âœ¨ğŸ¨ğŸš€ğŸ³</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://www.chenb.top/"/>
  <updated>2024-09-23T07:13:38.190Z</updated>
  <id>https://www.chenb.top/</id>
  
  <author>
    <name>Chen Bin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>linuxå®‰è£…SSR</title>
    <link href="https://www.chenb.top/2024/09/20/install-ssr/"/>
    <id>https://www.chenb.top/2024/09/20/install-ssr/</id>
    <published>2024-09-20T06:29:03.000Z</published>
    <updated>2024-09-23T07:13:38.190Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è„šæœ¬ä»£ç "><a href="#è„šæœ¬ä»£ç " class="headerlink" title="è„šæœ¬ä»£ç "></a>è„šæœ¬ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget -N --no-check-certificate https://raw.githubusercontent.com/ToyoDAdoubi/doubi/master/ssr.sh &amp;&amp; chmod +x ssr.sh &amp;&amp; bash ssr.sh</span><br><span class="line"><span class="comment"># 1 - 10 2 - - - - - -</span></span><br><span class="line"></span><br><span class="line">wget -N --no-check-certificate <span class="string">&quot;https://raw.githubusercontent.com/chiakge/Linux-NetSpeed/master/tcp.sh&quot;</span></span><br><span class="line">chmod +x tcp.sh</span><br><span class="line">./tcp.sh</span><br><span class="line"><span class="comment"># 1 y 6</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;è„šæœ¬ä»£ç &quot;&gt;&lt;a href=&quot;#è„šæœ¬ä»£ç &quot; class=&quot;headerlink&quot; title=&quot;è„šæœ¬ä»£ç &quot;&gt;&lt;/a&gt;è„šæœ¬ä»£ç &lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>dockeréƒ¨ç½²appiumæœåŠ¡å™¨</title>
    <link href="https://www.chenb.top/2024/09/20/docker-appium/"/>
    <id>https://www.chenb.top/2024/09/20/docker-appium/</id>
    <published>2024-09-20T06:10:36.000Z</published>
    <updated>2024-09-20T06:28:27.772Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è„šæœ¬ä»£ç "><a href="#è„šæœ¬ä»£ç " class="headerlink" title="è„šæœ¬ä»£ç "></a>è„šæœ¬ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">-d \</span><br><span class="line">-v /usr/src/key:/root/.android \</span><br><span class="line">-p 4723:4723 \</span><br><span class="line">-e REMOTE_ADB=<span class="literal">true</span> \</span><br><span class="line">-e ANDROID_DEVICES=116.62.65.226:1000,116.62.65.226:1002 \</span><br><span class="line">-e REMOTE_ADB_POLLING_SEC=60 \</span><br><span class="line">-e APPIUM_ADDITIONAL_PARAMS=<span class="string">&quot;--ssl-cert-path=/root/.android/cert.pem --ssl-key-path=/root/.android/key.pem&quot;</span> \</span><br><span class="line">--name appium \</span><br><span class="line">appium/appium</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      dockeréƒ¨ç½²appiumæœåŠ¡å™¨
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Shell" scheme="https://www.chenb.top/tags/Shell/"/>
    
      <category term="Docker" scheme="https://www.chenb.top/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>WindowsServerè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶çš„è„šæœ¬</title>
    <link href="https://www.chenb.top/2023/05/31/windows-server-deploy/"/>
    <id>https://www.chenb.top/2023/05/31/windows-server-deploy/</id>
    <published>2023-05-31T03:11:38.000Z</published>
    <updated>2023-08-02T07:37:41.175Z</updated>
    
    <content type="html"><![CDATA[<h3 id="è„šæœ¬ä»£ç "><a href="#è„šæœ¬ä»£ç " class="headerlink" title="è„šæœ¬ä»£ç "></a>è„šæœ¬ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹ä¸‹è½½åº”ç”¨ç¨‹åº...</span><br><span class="line">bitsadmin /transfer n https://geshui-data.oss-cn-hangzhou.aliyuncs.com/hf-rpa-setup.exe c:\1.exe</span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹å®‰è£…åº”ç”¨ç¨‹åº...</span><br><span class="line">start /<span class="built_in">wait</span> c:\1.exe /silent</span><br><span class="line"><span class="built_in">echo</span> å®‰è£…å®Œæˆ</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹ä¸‹è½½åº”ç”¨ç¨‹åº...</span><br><span class="line">bitsadmin /transfer n https://geshui-data.oss-cn-hangzhou.aliyuncs.com/vcredist_x86.exe c:\2.exe</span><br><span class="line"><span class="built_in">echo</span> å¼€å§‹å®‰è£…åº”ç”¨ç¨‹åº...</span><br><span class="line">start /<span class="built_in">wait</span> c:\2.exe /silent</span><br><span class="line"><span class="built_in">echo</span> å®‰è£…å®Œæˆ</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      WindowsServerè‡ªåŠ¨ä¸‹è½½å¹¶å®‰è£…è½¯ä»¶çš„è„šæœ¬
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Windows" scheme="https://www.chenb.top/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Spring bootæµ‹è¯•ç±»MockMvcResultHandlers.print()ä¹±ç </title>
    <link href="https://www.chenb.top/2021/01/27/spring-boot-test-encoding-error/"/>
    <id>https://www.chenb.top/2021/01/27/spring-boot-test-encoding-error/</id>
    <published>2021-01-27T09:39:47.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h3><p>Spring bootå‡çº§åˆ°2.3ä»¥åï¼Œæµ‹è¯•ç±»ä¸­çš„MockMvcResultHandlers.print()æ‰“å°å‡ºæ¥çš„å­—ç¬¦éƒ½æ˜¯ä¹±ç äº†ï¼ŒæŸ¥äº†ä¸€ä¸‹æ”¹åŠ¨æ¯”è¾ƒå¤§ï¼Œä¸€ä¸ªä¸€ä¸ªä¿®æ”¹å¾ˆéº»çƒ¦ï¼Œå¯ä»¥æŠ½è±¡åˆ°BaseTestä¸­</p><h3 id="åŸºç±»ä¸­çš„å…¬å…±æ–¹æ³•"><a href="#åŸºç±»ä¸­çš„å…¬å…±æ–¹æ³•" class="headerlink" title="åŸºç±»ä¸­çš„å…¬å…±æ–¹æ³•"></a>åŸºç±»ä¸­çš„å…¬å…±æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•postæ¥å£</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postForTest</span><span class="params">(String except, Object content, String url, <span class="keyword">boolean</span> isPrint)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    ResultActions resultActions = <span class="keyword">this</span>.mock.perform(</span><br><span class="line">            post(url).headers(headers).content(<span class="keyword">new</span> JsonMapper().toJson(content))</span><br><span class="line">    ).andExpect(status().isOk());</span><br><span class="line">    resultActions.andReturn().getResponse().setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (isPrint) &#123;</span><br><span class="line">        resultActions.andDo(MockMvcResultHandlers.print());</span><br><span class="line">    &#125;</span><br><span class="line">    resultActions.andExpect(content().json(except));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Spring bootæµ‹è¯•ç±»MockMvcResultHandlers.print()ä¹±ç 
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>Spring Boot Adminæ·»åŠ å®‰å…¨éªŒè¯</title>
    <link href="https://www.chenb.top/2021/01/27/securing-spring-boot-admin/"/>
    <id>https://www.chenb.top/2021/01/27/securing-spring-boot-admin/</id>
    <published>2021-01-27T09:02:54.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h3 id="é˜¿é‡Œäº‘å®‰å…¨è­¦å‘Š"><a href="#é˜¿é‡Œäº‘å®‰å…¨è­¦å‘Š" class="headerlink" title="é˜¿é‡Œäº‘å®‰å…¨è­¦å‘Š"></a>é˜¿é‡Œäº‘å®‰å…¨è­¦å‘Š</h3><p>é˜¿é‡Œäº‘å—å·¥ä¸šå’Œä¿¡æ¯åŒ–éƒ¨ç½‘ç»œå®‰å…¨ç®¡ç†å±€å§”æ‰˜é€šçŸ¥æ‚¨ï¼Œæ‚¨çš„èµ„äº§ï¼šXX.XX.XX.XXï¼Œå­˜åœ¨Spring Boot Admin æœªæˆæƒè®¿é—®æ¼æ´ï¼Œæ¼æ´æŠ¥å‘Šåœ°å€ï¼šâ€¦ï¼Œè¯¦æƒ…è¯·æŸ¥é˜…é‚®ä»¶æˆ–ç«™å†…ä¿¡ã€‚è¯·æ‚¨å‚ç…§ä¿®å¤å»ºè®®å°½å¿«è¿›è¡Œæ•´æ”¹ï¼Œé¿å…æ¼æ´è¢«é»‘å®¢åˆ©ç”¨ï¼Œå¯¹äºé•¿æœŸå­˜åœ¨å®‰å…¨éšæ‚£ä½†æœªæ•´æ”¹çš„ç½‘ç»œèµ„æºï¼Œç›‘ç®¡éƒ¨é—¨å¯èƒ½ä¼šä¸‹è¾¾è¡Œæ”¿å¤„ç½šï¼ˆå…³åœã€çº¦è°ˆç­‰ï¼‰ï¼Œæœ›æ‚¨åŠ¡å¿…é‡è§†ã€‚</p><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>Spring Bootç›‘æ§ç³»ç»Ÿä¸€ç›´æ²¡æœ‰åŠ å®‰å…¨æœºåˆ¶ï¼Œè¢«å·¥ä¿¡éƒ¨ç‚¹åäº†ï¼Œéœ€è¦åŠ ä¸Šè´¦å·å¯†ç éªŒè¯ã€‚</p><h3 id="Spring-Boot-Admin-Serverç«¯"><a href="#Spring-Boot-Admin-Serverç«¯" class="headerlink" title="Spring Boot Admin Serverç«¯"></a>Spring Boot Admin Serverç«¯</h3><p>pom.xmlä¸­æ·»åŠ security<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><br>é¡¹ç›®é‡Œé¢æ·»åŠ é…ç½®ç±»SecuritySecureConfig.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SecuritySecureConfig</span> <span class="keyword">extends</span> <span class="title">WebSecurityConfigurerAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">final</span> AdminServerProperties adminServer;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SecuritySecureConfig</span><span class="params">(AdminServerProperties adminServer)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.adminServer = adminServer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    SavedRequestAwareAuthenticationSuccessHandler successHandler = <span class="keyword">new</span> SavedRequestAwareAuthenticationSuccessHandler();</span><br><span class="line">    successHandler.setTargetUrlParameter(<span class="string">&quot;redirectTo&quot;</span>);</span><br><span class="line">    successHandler.setDefaultTargetUrl(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/&quot;</span>));</span><br><span class="line"></span><br><span class="line">    http.authorizeRequests(</span><br><span class="line">        (authorizeRequests) -&gt; authorizeRequests.antMatchers(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/assets/**&quot;</span>)).permitAll() </span><br><span class="line">            .antMatchers(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/login&quot;</span>)).permitAll().anyRequest().authenticated() </span><br><span class="line">    ).formLogin(</span><br><span class="line">        (formLogin) -&gt; formLogin.loginPage(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/login&quot;</span>)).successHandler(successHandler).and() </span><br><span class="line">    ).logout((logout) -&gt; logout.logoutUrl(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/logout&quot;</span>))).httpBasic(Customizer.withDefaults()) </span><br><span class="line">        .csrf((csrf) -&gt; csrf.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()) </span><br><span class="line">            .ignoringRequestMatchers(</span><br><span class="line">                <span class="keyword">new</span> AntPathRequestMatcher(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/instances&quot;</span>),</span><br><span class="line">                    HttpMethod.POST.toString()), </span><br><span class="line">                <span class="keyword">new</span> AntPathRequestMatcher(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/instances/*&quot;</span>),</span><br><span class="line">                    HttpMethod.DELETE.toString()), </span><br><span class="line">                <span class="keyword">new</span> AntPathRequestMatcher(<span class="keyword">this</span>.adminServer.path(<span class="string">&quot;/actuator/**&quot;</span>)) </span><br><span class="line">            ))</span><br><span class="line">        .rememberMe((rememberMe) -&gt; rememberMe.key(UUID.randomUUID().toString()).tokenValiditySeconds(<span class="number">1209600</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Required to provide UserDetailsService for &quot;remember functionality&quot;</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">configure</span><span class="params">(AuthenticationManagerBuilder auth)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„è´¦å·å¯†ç æ”¹æˆè‡ªå·±éœ€è¦çš„        </span></span><br><span class="line">    auth.inMemoryAuthentication().withUser(<span class="string">&quot;user&quot;</span>).password(<span class="string">&quot;&#123;noop&#125;password&quot;</span>).roles(<span class="string">&quot;USER&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>æ³¨æ„ï¼š è®°å½•ä¸€ä¸‹æœ€åä¸€ä¸ªæ–¹æ³•çš„è´¦å·å¯†ç ï¼ŒClientç«¯éœ€è¦å¡«å†™ç›¸å…³çš„é…ç½®</p><h3 id="Spring-Boot-Admin-Clientç«¯"><a href="#Spring-Boot-Admin-Clientç«¯" class="headerlink" title="Spring Boot Admin Clientç«¯"></a>Spring Boot Admin Clientç«¯</h3><p>æ·»åŠ è´¦å·å¯†ç çš„é…ç½®<br><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.boot.admin.client.username</span>=<span class="string">user</span></span><br><span class="line"><span class="meta">spring.boot.admin.client.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure></p><h3 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h3><p>Spring Boot Adminç‰ˆæœ¬ï¼š<code>2.3.0</code><br>å®˜ç½‘ç›¸å…³æ–‡ç« ï¼š <a href="https://codecentric.github.io/spring-boot-admin/2.3.0/#securing-spring-boot-admin">ä¿æŠ¤Spring Boot AdminæœåŠ¡å™¨</a></p>]]></content>
    
    <summary type="html">
    
      é˜¿é‡Œäº‘Spring Boot Admin æœªæˆæƒè®¿é—®æ¼æ´ï¼Œéœ€è¦æ·»åŠ å®‰å…¨éªŒè¯è§£å†³
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>é‡è£…ç³»ç»Ÿæç¤ºæ— æ³•åˆ›å»ºæ–°çš„åˆ†åŒºï¼Œä¹Ÿæ‰¾ä¸åˆ°ç°æœ‰çš„åˆ†åŒº</title>
    <link href="https://www.chenb.top/2021/01/27/windows-install/"/>
    <id>https://www.chenb.top/2021/01/27/windows-install/</id>
    <published>2021-01-27T07:28:42.000Z</published>
    <updated>2022-01-20T02:23:10.009Z</updated>
    
    <content type="html"><![CDATA[<p>ç»ˆç»“è§£å†³æ–¹æ¡ˆï¼šåˆ©ç”¨Windowsè‡ªå¸¦çš„å¼•å¯¼æ–‡ä»¶è¿›è¡Œå®‰è£…<br>é¦–å…ˆè¿›å…¥PEï¼Œåœ¨PEä¸‹æ‰¾åˆ°ä½ çš„ç³»ç»ŸISOé•œåƒï¼Œè§£å‹ç¼©ï¼Œç„¶åå°†é•œåƒé‡Œçš„<code>bootæ–‡ä»¶å¤¹ã€sourcesæ–‡ä»¶å¤¹å’Œbootmgræ–‡ä»¶</code>æå–å‡ºæ¥ï¼Œç„¶åå¤åˆ¶åˆ°ä½ è¦å®‰è£…çš„åˆ†åŒºï¼ˆæ¯”å¦‚cç›˜ï¼‰ï¼Œæ¥ä¸‹æ¥æ‹”ä¸‹Uç›˜ï¼Œé‡æ–°å¯åŠ¨è®¡ç®—æœºï¼Œå³å¯è¿›å…¥Windowså®‰è£…ç•Œé¢è¿›è¡Œæ­£å¸¸å®‰è£…ã€‚</p>]]></content>
    
    <summary type="html">
    
      é‡è£…ç³»ç»Ÿæç¤ºæ— æ³•åˆ›å»ºæ–°çš„åˆ†åŒºï¼Œä¹Ÿæ‰¾ä¸åˆ°ç°æœ‰çš„åˆ†åŒº
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Windows" scheme="https://www.chenb.top/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>Spring boot Too many open filesé”™è¯¯</title>
    <link href="https://www.chenb.top/2020/07/24/spring-boot-too-many-open-files/"/>
    <id>https://www.chenb.top/2020/07/24/spring-boot-too-many-open-files/</id>
    <published>2020-07-24T02:03:33.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ç°è±¡"><a href="#ç°è±¡" class="headerlink" title="ç°è±¡"></a>ç°è±¡</h3><p>å‰ç«¯åŒäº‹çªç„¶å‘ŠçŸ¥é›†æˆç¯å¢ƒè¿ä¸ä¸Šäº†ï¼Œç„¶åæˆ‘è¿sshæµ‹è¯•ä¸€ä¸‹ï¼Œå‘ç°æ•´ä¸ªæœåŠ¡å™¨éƒ½å˜å¾—å¾ˆæ…¢äº†ï¼Œç›‘æ§æ˜¾ç¤ºæœ‰ä¸ªdbusè¿›ç¨‹å ç”¨äº†100%çš„CPUã€‚é¦–å…ˆååº”æ˜¯è¢«æ”»å‡»äº†ï¼Ÿæœ€è¿‘å°±åªæ˜¯éƒ¨ç½²äº†ä¸€ä¸ªæ–°ç‰ˆæœ¬çš„webfluxé¡¹ç›®ï¼ŒæŸ¥çœ‹äº†ä¸€ä¸‹å„ç§æ—¥å¿—ï¼Œå‘ç°åˆ°å¤„éƒ½åœ¨æŠ¥<code>Too many open files</code>ã€‚è¯¥æœåŠ¡å™¨æ˜¯æµ‹è¯•æœåŠ¡å™¨ï¼Œé‡Œé¢ç”¨Dockeréƒ¨ç½²äº†ä¸€å †å®¹å™¨ï¼š<code>Jenkins</code>,<code>MySQL</code>,<code>Redis</code>,<code>Spring boot admin</code>ç­‰ç­‰ã€‚æ­¤æ—¶Jenkinså®¹å™¨å·²ç»æŒ‚äº†ï¼Œå…¶ä»–çš„è™½ç„¶æ²¡æŒ‚ä½†æ˜¯ä¹Ÿè¿ä¸ä¸Šäº†ã€‚çŒœæµ‹æ˜¯Linuxæ–‡ä»¶ç³»ç»Ÿå‡ºäº†é—®é¢˜ã€‚</p><h3 id="åŸå› "><a href="#åŸå› " class="headerlink" title="åŸå› "></a>åŸå› </h3><p>å„ç§æœç´¢åï¼Œå‘ç°è¿™æ˜¯<code>io.projectreactor.netty:reactor-netty:0.9.8.RELEASE</code>çš„ä¸€ä¸ªbugï¼Œæ›´æ–°åˆ°<code>0.9.9.RELEASE</code>å°±å¯ä»¥ä¿®å¤äº†ã€‚<br>ç›¸å…³é“¾æ¥ï¼š<br><a href="https://github.com/spring-projects/spring-boot/issues/21923">Too many open files after upgrade to Spring Boot 2.2.8 #21923</a><br><a href="https://github.com/spring-projects/spring-boot/issues/21934">Many File Open Issue : Spring Boot 2.3.0 -&gt; Spring Boot 2.3.1 #21934</a><br><a href="https://github.com/wayne-robinson/thule/commit/c13d2ce7c92f420612e658419bb1236f59cfd011">Spring Boot uses version 0.9.8.RELEASE which contains a bug producingâ€¦</a></p><h3 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h3><p>ä¸´æ—¶å¤„ç†ï¼šå…ˆè§£å†³çœ¼ä¸‹çš„é—®é¢˜ï¼Œkillæ‰dbusè¿›ç¨‹ï¼Œç„¶åé‡å¯æœåŠ¡å™¨ï¼Œåšä¸€ä¸‹æ¸…ç†å·¥ä½œï¼ˆredisæ—¥å¿—å¤šå‡ºæ¥10ä¸ªGæ’‘çˆ†äº†ç£ç›˜ï¼‰ï¼Œç„¶åé‡å¯æ¯ä¸ªå®¹å™¨ï¼Œä¸€åˆ‡éƒ½æ­£å¸¸äº†ã€‚åç»­è¿˜è¦å…³æ³¨ä¸€ä¸‹Spring bootæ–°ç‰ˆæœ¬è¿™ä¸ªé—®é¢˜çš„ä¿®å¤æƒ…å†µã€‚<br>Spring boot 2.3.2å°†ä¼šä¿®å¤è¿™ä¸ªbugï¼Œåº”è¯¥å¿«äº†ï¼Œå†ç­‰ç­‰å§ã€‚OVER</p>]]></content>
    
    <summary type="html">
    
      è®°å½•å‡çº§Spring bootå¤§ç‰ˆæœ¬åæœåŠ¡å™¨å®•æœºçš„é—®é¢˜
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
      <category term="Netty" scheme="https://www.chenb.top/tags/Netty/"/>
    
  </entry>
  
  <entry>
    <title>Spring bootå‡çº§åˆ°2.3.1ç¬”è®°</title>
    <link href="https://www.chenb.top/2020/07/06/spring-boot-update-version2/"/>
    <id>https://www.chenb.top/2020/07/06/spring-boot-update-version2/</id>
    <published>2020-07-06T08:35:39.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><blockquote><p>è€ç‰ˆæœ¬çš„Spring bootå·²ç»ç»§ç»­ç”¨äº†2å¹´äº†ï¼Œæœ€è¿‘å‘ç°å®˜ç½‘çš„æ¨èç‰ˆæœ¬å·²ç»æ²¡æœ‰äº†1.5ç³»åˆ—çš„äº†ï¼Œä¸‹å†³å¿ƒè¦å‡çº§å¤§ç‰ˆæœ¬ï¼ŒæŠŠä¹‹å‰å†™çš„å‡çº§æ–¹æ¡ˆæ‰¾å‡ºæ¥å‚è€ƒäº†ä¸€ä¸‹ï¼Œè¿™æ¬¡åº”è¯¥è¿˜ä¼šç¢°åˆ°ä¸€äº›å…¶ä»–é—®é¢˜ï¼Œç‰¹æ­¤è®°å½•ä»¥å¤‡ä¸æ—¶ä¹‹éœ€</p></blockquote><ul><li>Spring bootç‰ˆæœ¬ï¼š<code>1.5.8.RELEASE</code> -&gt; <code>2.3.1.RELEASE</code></li><li>Spring Data JPAç‰ˆæœ¬: <code>1.11.8.RELEASE</code> -&gt; <code>2.3.1.RELEASE</code></li></ul><p>æœ¬æ¥æƒ³æŒ‰å®˜ç½‘çš„æ›´ç¨³å¦¥çš„æ–¹æ¡ˆä¸€æ­¥ä¸€æ­¥å‡çº§ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„Spring bootåŠŸèƒ½æ¯”è¾ƒå°‘ï¼ŒCTOå»ºè®®ç›´æ¥å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬<br>å…ˆæŒ‰ä¸¤å¹´å‰çš„æ–¹æ¡ˆä¿®æ”¹å„ç§é…ç½®ï¼š<a href="/blog/2018/11/26/spring-boot-update-version">Spring bootå‡çº§åˆ°2.1</a></p><h3 id="æ·»åŠ å‡çº§å·¥å…·"><a href="#æ·»åŠ å‡çº§å·¥å…·" class="headerlink" title="æ·»åŠ å‡çº§å·¥å…·"></a>æ·»åŠ å‡çº§å·¥å…·</h3><p>å‡çº§æ–‡æ¡£ä¸­å‘ç°æœ‰å‡çº§å·¥å…·ï¼Œæ·»åŠ åˆ°pomä¸­<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- å‡çº§å·¥å…· --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-properties-migrator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="æœ¬åœ°h2æ•°æ®åº“ä¿ç•™å­—é—®é¢˜"><a href="#æœ¬åœ°h2æ•°æ®åº“ä¿ç•™å­—é—®é¢˜" class="headerlink" title="æœ¬åœ°h2æ•°æ®åº“ä¿ç•™å­—é—®é¢˜"></a>æœ¬åœ°h2æ•°æ®åº“ä¿ç•™å­—é—®é¢˜</h3><p>æŸ¥è¯¢äº†ä¸€ä¸‹ï¼Œh2æ•°æ®åº“ç‰ˆæœ¬ä»<code>1.4.196</code>åˆ°<code>1.4.200</code>ï¼ŒåŸå…ˆæ•°æ®åº“è¡¨ä¸­æœ‰ä¸€äº›åç§°ä¸º<code>row</code>çš„å­—æ®µï¼Œè¿™äº›å­—æ®µéƒ½å˜æˆä¿ç•™å­—äº†ï¼Œåˆå§‹åŒ–çš„sqlæ‰§è¡ŒæŠ¥é”™<br>åŸå…ˆæ€è·¯æ˜¯ä¿®æ”¹å­—æ®µåç§°ï¼Œè¿™æ ·æ”¹åŠ¨å¤ªå¤§äº†ï¼ŒCTOå»ºè®®h2å•ç‹¬åˆ‡æ¢å›è€ç‰ˆæœ¬ï¼Œæµ‹è¯•åæ²¡æœ‰é—®é¢˜äº†<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.196<span class="tag">&lt;/<span class="name">version</span>&gt;</span><span class="comment">&lt;!-- æ·»åŠ ä¸€è¡ŒæŒ‡å®šç‰ˆæœ¬å· --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="swagger2ç‰ˆæœ¬å†²çªé—®é¢˜"><a href="#swagger2ç‰ˆæœ¬å†²çªé—®é¢˜" class="headerlink" title="swagger2ç‰ˆæœ¬å†²çªé—®é¢˜"></a>swagger2ç‰ˆæœ¬å†²çªé—®é¢˜</h3><p>å¯åŠ¨ä»ç„¶æŠ¥é”™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">***************************</span><br><span class="line">APPLICATION FAILED TO START</span><br><span class="line">***************************</span><br><span class="line"></span><br><span class="line">Description:</span><br><span class="line"></span><br><span class="line">Parameter 0 of method linkDiscoverers in org.springframework.hateoas.config.HateoasConfiguration required a single bean, but 3 were found:</span><br><span class="line">- relProviderPluginRegistry: defined by method &#39;relProviderPluginRegistry&#39; in class path resource [org&#x2F;springframework&#x2F;hateoas&#x2F;config&#x2F;HateoasConfiguration.class]</span><br><span class="line">- linkDiscovererRegistry: defined in null</span><br><span class="line">- entityLinksPluginRegistry: defined by method &#39;entityLinksPluginRegistry&#39; in class path resource [org&#x2F;springframework&#x2F;hateoas&#x2F;config&#x2F;WebMvcEntityLinksConfiguration.class]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider marking one of the beans as @Primary, updating the consumer to accept multiple beans, or using @Qualifier to identify the bean that should be consumed</span><br><span class="line"></span><br><span class="line">Disconnected from the target VM, address: &#39;127.0.0.1:61337&#39;, transport: &#39;socket&#39;</span><br><span class="line"></span><br><span class="line">Process finished with exit code 1</span><br></pre></td></tr></table></figure><br>ç½‘ä¸Šæœç´¢äº†ä¸€ä¸‹è¿™ä¸ªæŠ¥é”™ï¼Œè¯´æ˜¯å’Œswagger2ç‰ˆæœ¬æœ‰å…³ï¼Œä¿®æ”¹pomä¸­çš„ç‰ˆæœ¬å·ï¼ˆ<code>2.2.2</code>-&gt;<code>2.9.2</code>ï¼‰ä¹‹åé—®é¢˜å°±è§£å†³äº†</p><h3 id="æ—¶é—´æ ¼å¼é—®é¢˜"><a href="#æ—¶é—´æ ¼å¼é—®é¢˜" class="headerlink" title="æ—¶é—´æ ¼å¼é—®é¢˜"></a>æ—¶é—´æ ¼å¼é—®é¢˜</h3><p>æµ‹è¯•ç±»æŠ¥äº†æ—¶é—´æ¯”å¯¹é”™è¯¯ï¼Œå»å®˜ç½‘å‡çº§æŒ‡å—ä¸­æ‰¾åˆ°äº†ç›¸å…³è¯´æ˜ï¼š<br>In 2.0, weâ€™ve flipped a Jackson configuration default to write JSR-310 dates as ISO-8601 strings. If you wish to return to the previous behavior, you can add <code>spring.jackson.serialization.write-dates-as-timestamps=true</code> to your configuration.<br>åœ¨æµ‹è¯•ç±»ä¸­æ·»åŠ æ—¶é—´æ ¼å¼è®¾ç½®<br><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.jackson.serialization.write-dates-as-timestamps</span> = <span class="string">true</span></span><br></pre></td></tr></table></figure><br>åˆ°æ­¤ä¸ºæ­¢ï¼Œæ–°ç‰ˆæœ¬çš„å…¼å®¹å·²ç»OKäº†ï¼Œé¡¹ç›®èƒ½æ­£å¸¸è¿è¡Œäº†ï¼Œæµ‹è¯•ç±»ä¹Ÿå…¨éƒ¨å¯ä»¥é€šè¿‡äº†ã€‚<br>åé¢ä»éœ€è¦å®Œå–„ä¸€äº›è­¦å‘Šï¼Œè¿‡æ—¶æ–¹æ³•ç­‰ï¼Œç»è¿‡å°èŒƒå›´çš„è¯•ç”¨åå°±å¯ä»¥ç¡®å®šå‡çº§æ–¹æ¡ˆäº†ã€‚</p><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><p>Spring boot v1.5 â†’ v2.0 å‡çº§æŒ‡å—ï¼š<a href="https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.0-Migration-Guide">Spring Boot 2.0 Migration Guide</a><br>Spring boot æœ€æ–°æ–‡æ¡£ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/html/">Spring Boot Reference Documentation</a></p>]]></content>
    
    <summary type="html">
    
      Spring bootä»1.5.8å‡çº§åˆ°2.3.1
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>Javaå°è£…orikaå®ç°å¯¹è±¡æ‹·è´</title>
    <link href="https://www.chenb.top/2020/06/19/java-orika/"/>
    <id>https://www.chenb.top/2020/06/19/java-orika/</id>
    <published>2020-06-19T05:10:57.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><p>ä¸€ç›´ä½¿ç”¨orikaå¤åˆ¶å¯¹è±¡ï¼Œæœ€è¿‘å¶ç„¶å‘ç°äº†orikaè¿˜æœ‰å±æ€§å¤åˆ¶çš„åŠŸèƒ½ï¼Œç ”ç©¶åå°è£…äº†ä¸€ä¸‹ï¼Œä»¥åç”¨èµ·æ¥å°±æ›´æ–¹ä¾¿äº†</p><h3 id="pom-xml"><a href="#pom-xml" class="headerlink" title="pom.xml"></a>pom.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ma.glasnost.orika<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>orika-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="å·¥å…·ç±»"><a href="#å·¥å…·ç±»" class="headerlink" title="å·¥å…·ç±»"></a>å·¥å…·ç±»</h3><ul><li>åšäº†ç®€å•çš„å°è£…ï¼ŒæŒ‰ä¸šåŠ¡éœ€è¦å¯ä»¥é€‰æ‹©æ˜¯å¦è¦†ç›–ç©ºå€¼</li><li>è¿˜æœ‰å¾ˆå¤šæ›´çµæ´»çš„é…ç½®æš‚æ—¶æ²¡ç”¨åˆ°ï¼Œæ¯”å¦‚å¯ä»¥æŒ‡å®šä¸åŒåå­—ã€ä¸åŒç±»å‹å­—æ®µçš„æ˜ å°„å…³ç³»ï¼Œè¿™äº›ç­‰ä»¥åæœ‰éœ€æ±‚çš„æ—¶å€™å†åŠ ä¸Š<figure class="highlight java"><figcaption><span>BeanMapper.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ma.glasnost.orika.MapperFacade;</span><br><span class="line"><span class="keyword">import</span> ma.glasnost.orika.MapperFactory;</span><br><span class="line"><span class="keyword">import</span> ma.glasnost.orika.impl.DefaultMapperFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç®€å•å°è£…orika, å®ç°æ·±åº¦è½¬æ¢Bean&lt;-&gt;Beançš„Mapper.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BeanMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MapperFacade defaultMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> MapperFacade ignoreNullMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        MapperFactory defaultMapperFactory = <span class="keyword">new</span> DefaultMapperFactory.Builder().build();</span><br><span class="line">        defaultMapper = defaultMapperFactory.getMapperFacade();</span><br><span class="line">        MapperFactory ignoreNullMapperFactory = <span class="keyword">new</span> DefaultMapperFactory.Builder().mapNulls(<span class="keyword">false</span>).build();</span><br><span class="line">        ignoreNullMapper = ignoreNullMapperFactory.getMapperFacade();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤åˆ¶å¯¹è±¡çš„å±æ€§ï¼ˆå¿½ç•¥nullï¼‰</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, D&gt; <span class="function"><span class="keyword">void</span> <span class="title">mapIgnoreNull</span><span class="params">(S sourceObject, D destinationObject)</span> </span>&#123;</span><br><span class="line">        ignoreNullMapper.map(sourceObject, destinationObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤åˆ¶å¯¹è±¡çš„å±æ€§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, D&gt; <span class="function"><span class="keyword">void</span> <span class="title">map</span><span class="params">(S sourceObject, D destinationObject)</span> </span>&#123;</span><br><span class="line">        defaultMapper.map(sourceObject, destinationObject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤åˆ¶å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, D&gt; <span class="function">D <span class="title">map</span><span class="params">(S source, Class&lt;D&gt; destinationClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> defaultMapper.map(source, destinationClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¤åˆ¶å¯¹è±¡list</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;S, D&gt; <span class="function">List&lt;D&gt; <span class="title">mapList</span><span class="params">(Iterable&lt;S&gt; sourceList, Class&lt;D&gt; destinationClass)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> defaultMapper.mapAsList(sourceList, destinationClass);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      Javaå°è£…orikaå®ç°å¯¹è±¡æ‹·è´
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Javaè·å–æ–‡ä»¶çœŸå®æ ¼å¼</title>
    <link href="https://www.chenb.top/2020/01/16/java-input-stream-get-file-type/"/>
    <id>https://www.chenb.top/2020/01/16/java-input-stream-get-file-type/</id>
    <published>2020-01-16T05:47:41.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œæ–‡ä»¶çš„ç±»å‹å’Œåç¼€åä¸ä¸€è‡´ï¼Œè¿™æ ·å°±ä¸èƒ½ç®€å•çš„ç”¨åç¼€ååˆ¤æ–­æ–‡ä»¶çš„æ ¼å¼ã€‚<br>ä¾‹å¦‚ï¼šPOIå¯¼å…¥excelåªèƒ½æ”¯æŒ.xlså’Œ.xlsxçš„æ–‡ä»¶è§£æï¼Œä½†æœ‰äº›çœŸå®æ ¼å¼ä¸ºcsvæˆ–htmlçš„.xlsæ–‡ä»¶æ··å…¥å…¶ä¸­å°±ä¼šå¯¼è‡´å¯¼å…¥å¤±è´¥ï¼Œé‚£ä¹ˆå°±éœ€è¦æ ¹æ®å¤´éƒ¨ä¿¡æ¯åŒ¹é…æ ¼å¼</p><h3 id="è·å–æ–‡ä»¶çœŸå®ç±»å‹"><a href="#è·å–æ–‡ä»¶çœŸå®ç±»å‹" class="headerlink" title="è·å–æ–‡ä»¶çœŸå®ç±»å‹"></a>è·å–æ–‡ä»¶çœŸå®ç±»å‹</h3><ol><li>è·å–æ–‡ä»¶çš„å¤´éƒ¨å­—èŠ‚</li><li>å°†å¤´éƒ¨å­—èŠ‚è½¬æ¢æˆ16è¿›åˆ¶å­—ç¬¦ä¸²</li><li>åŒ¹é…å­—ç¬¦ä¸²è·å–æ–‡ä»¶ç±»å‹</li></ol><figure class="highlight java"><figcaption><span>FileTypeJudge.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶ç±»å‹åˆ¤æ–­ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">FileTypeJudge</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Constructor</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">FileTypeJudge</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ–‡ä»¶å¤´è½¬æ¢æˆ16è¿›åˆ¶å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">bytesToHexString</span><span class="params">(<span class="keyword">byte</span>[] src)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">if</span> (src == <span class="keyword">null</span> || src.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">byte</span> b : src) &#123;</span><br><span class="line">            <span class="keyword">int</span> v = b &amp; <span class="number">0xFF</span>;</span><br><span class="line">            String hv = Integer.toHexString(v);</span><br><span class="line">            <span class="keyword">if</span> (hv.length() &lt; <span class="number">2</span>) &#123;</span><br><span class="line">                stringBuilder.append(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            stringBuilder.append(hv);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¾—åˆ°æ–‡ä»¶å¤´</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">getFileContent</span><span class="params">(InputStream inputStream)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">byte</span>[] b = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">28</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            inputStream.read(b, <span class="number">0</span>, <span class="number">28</span>);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (inputStream != <span class="keyword">null</span>) &#123;</span><br><span class="line">                inputStream.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> bytesToHexString(b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ¤æ–­æ–‡ä»¶ç±»å‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> FileType <span class="title">getType</span><span class="params">(InputStream inputStream)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">        String fileHead = getFileContent(inputStream);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (fileHead == <span class="keyword">null</span> || fileHead.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (FileType type : FileType.values()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (fileHead.startsWith(type.code)) &#123;</span><br><span class="line">                <span class="keyword">return</span> type;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * InputStreamè½¬ByteArrayOutputStreamï¼Œç”¨äºæµçš„å¤åˆ¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ByteArrayOutputStream <span class="title">cloneInputStream</span><span class="params">(InputStream input)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        <span class="keyword">byte</span>[] buffer = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> ((len = input.read(buffer)) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">            baos.write(buffer, <span class="number">0</span>, len);</span><br><span class="line">        &#125;</span><br><span class="line">        baos.flush();</span><br><span class="line">        <span class="keyword">return</span> baos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å…³äºæµçš„å¤åˆ¶"><a href="#å…³äºæµçš„å¤åˆ¶" class="headerlink" title="å…³äºæµçš„å¤åˆ¶"></a>å…³äºæµçš„å¤åˆ¶</h3><p>ç”±äºåˆ¤æ–­æ–‡ä»¶æ ¼å¼éœ€è¦è¯»å–æµçš„å¤´éƒ¨ä¿¡æ¯ï¼Œè¿™ä¸ªè¯»å–æ˜¯ä¸å¯é€†çš„ï¼Œè€Œåˆ¤æ–­å®Œæ–‡ä»¶æ ¼å¼åé€šå¸¸è¿˜éœ€è¦è¯»æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦å¤åˆ¶ä¸€ä¸ªInputStream<br><figure class="highlight java"><figcaption><span>å¤åˆ¶InputStream</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">InputStream fis = request.getFile(<span class="string">&quot;file&quot;</span>).getInputStream();</span><br><span class="line">ByteArrayOutputStream temp = cloneInputStream(fis);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“å¼€ä¸¤ä¸ªæ–°çš„è¾“å…¥æµï¼Œä¸€ä¸ªç”¨äºåˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œè¿˜æœ‰ä¸€ä¸ªç”¨äºè¯»å–æ–‡ä»¶å†…å®¹</span></span><br><span class="line">InputStream stream1 = <span class="keyword">new</span> ByteArrayInputStream(temp.toByteArray());</span><br><span class="line">InputStream stream2 = <span class="keyword">new</span> ByteArrayInputStream(temp.toByteArray());</span><br></pre></td></tr></table></figure></p><h3 id="æ–‡ä»¶ç±»å‹æšä¸¾"><a href="#æ–‡ä»¶ç±»å‹æšä¸¾" class="headerlink" title="æ–‡ä»¶ç±»å‹æšä¸¾"></a>æ–‡ä»¶ç±»å‹æšä¸¾</h3><p>ç½—åˆ—äº†å¤§éƒ¨åˆ†æ–‡ä»¶æ ¼å¼çš„å¤´éƒ¨ä¿¡æ¯ï¼Œå¦‚æœæœ‰æ–°çš„æ ¼å¼å¯ä»¥æµ‹è¯•åæ·»åŠ è¿›å»<br><figure class="highlight java"><figcaption><span>FileType.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–‡ä»¶ç±»å‹æšå–</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">FileType</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * JPEG(jpg)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    JPG(<span class="string">&quot;ffd8ffe000104a464946&quot;</span>,<span class="string">&quot;jpg&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * PNG(png)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PNG(<span class="string">&quot;89504e470d0a1a0a0000&quot;</span>,<span class="string">&quot;png&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * GIF(gif)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    GIF(<span class="string">&quot;47494638396126026f01&quot;</span>,<span class="string">&quot;gif&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * TIFF(tif)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    TIF(<span class="string">&quot;49492a00227105008037&quot;</span>,<span class="string">&quot;tif&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 16è‰²ä½å›¾(bmp)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BMP_16(<span class="string">&quot;424d228c010000000000&quot;</span>,<span class="string">&quot;bmp&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 24ä½ä½å›¾(bmp)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BMP_24(<span class="string">&quot;424d8240090000000000&quot;</span>,<span class="string">&quot;bmp&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 256è‰²ä½å›¾(bmp)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BMP_256(<span class="string">&quot;424d8e1b030000000000&quot;</span>,<span class="string">&quot;bmp&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * CAD(dwg)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DWG(<span class="string">&quot;41433130313500000000&quot;</span>,<span class="string">&quot;dwg&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HTML(html)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HTML(<span class="string">&quot;3c21444f435459504520&quot;</span>,<span class="string">&quot;html&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * HTM(htm)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HTM(<span class="string">&quot;3c21646f637479706520&quot;</span>,<span class="string">&quot;htm&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çŒè˜ã€æ™ºè”ç®€å†ã€‚htm</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    HTM_2(<span class="string">&quot;3c68746d6c20786d6c6e&quot;</span>,<span class="string">&quot;htm&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * css</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CSS(<span class="string">&quot;48544d4c207b0d0a0942&quot;</span>,<span class="string">&quot;css&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * js</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    JS(<span class="string">&quot;696b2e71623d696b2e71&quot;</span>,<span class="string">&quot;js&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * RichTextFormat(rtf)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RTF(<span class="string">&quot;7b5c727466315c616e73&quot;</span>,<span class="string">&quot;rtf&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Photoshop(psd)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PSD(<span class="string">&quot;38425053000100000000&quot;</span>,<span class="string">&quot;psd&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Email[OutlookExpress6](eml)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    EML(<span class="string">&quot;46726f6d3a203d3f6762&quot;</span>,<span class="string">&quot;eml&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MSExcelæ³¨æ„ï¼šwordã€msiå’Œexcelçš„æ–‡ä»¶å¤´ä¸€æ ·</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DOC(<span class="string">&quot;d0cf11e0a1b11ae10000&quot;</span>,<span class="string">&quot;doc&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * docxæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DOCX(<span class="string">&quot;504b0304140006000800&quot;</span>,<span class="string">&quot;docx&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MSAccess(mdb)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MDB(<span class="string">&quot;5374616E64617264204A&quot;</span>,<span class="string">&quot;mdb&quot;</span>),</span><br><span class="line">    PS(<span class="string">&quot;252150532D41646F6265&quot;</span>,<span class="string">&quot;ps&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * AdobeAcrobat(pdf)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PDF(<span class="string">&quot;255044462d312e350d0a&quot;</span>,<span class="string">&quot;pdf&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * rmvb/rmç›¸åŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RMVB(<span class="string">&quot;2e524d46000000120001&quot;</span>,<span class="string">&quot;rmvb&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * flvä¸f4vç›¸åŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    FLV(<span class="string">&quot;464c5601050000000900&quot;</span>,<span class="string">&quot;flv&quot;</span>),</span><br><span class="line">    MP4(<span class="string">&quot;00000020667479706d70&quot;</span>,<span class="string">&quot;mp4&quot;</span>),</span><br><span class="line">    MP3(<span class="string">&quot;49443303000000002176&quot;</span>,<span class="string">&quot;mp3&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MPG(<span class="string">&quot;000001ba210001000180&quot;</span>,<span class="string">&quot;mpg&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * wmvä¸asfç›¸åŒ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WMV(<span class="string">&quot;3026b2758e66cf11a6d9&quot;</span>,<span class="string">&quot;wmv&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Wave(wav)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WAV(<span class="string">&quot;52494646e27807005741&quot;</span>,<span class="string">&quot;wav&quot;</span>),</span><br><span class="line">    AVI(<span class="string">&quot;52494646d07d60074156&quot;</span>,<span class="string">&quot;avi&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MIDI(mid)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MID(<span class="string">&quot;4d546864000000060001&quot;</span>,<span class="string">&quot;mid&quot;</span>),</span><br><span class="line">    ZIP(<span class="string">&quot;504b0304140000000800&quot;</span>,<span class="string">&quot;zip&quot;</span>),</span><br><span class="line">    RAR(<span class="string">&quot;526172211a0700cf9073&quot;</span>,<span class="string">&quot;rar&quot;</span>),</span><br><span class="line">    INI(<span class="string">&quot;235468697320636f6e66&quot;</span>,<span class="string">&quot;ini&quot;</span>),</span><br><span class="line">    JAR(<span class="string">&quot;504b03040a0000000000&quot;</span>,<span class="string">&quot;jar&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å¯æ‰§è¡Œæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    EXE(<span class="string">&quot;4d5a9000030000000400&quot;</span>,<span class="string">&quot;exe&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * jspæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    JSP(<span class="string">&quot;3c25402070616765206c&quot;</span>,<span class="string">&quot;jsp&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * MFæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MF(<span class="string">&quot;4d616e69666573742d56&quot;</span>,<span class="string">&quot;mf&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * xmlæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    XML(<span class="string">&quot;3c3f786d6c2076657273&quot;</span>,<span class="string">&quot;xml&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sqlæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    SQL(<span class="string">&quot;494e5345525420494e54&quot;</span>,<span class="string">&quot;sql&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * javaæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    JAVA(<span class="string">&quot;7061636b616765207765&quot;</span>,<span class="string">&quot;java&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * batæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    BAT(<span class="string">&quot;406563686f206f66660d&quot;</span>,<span class="string">&quot;bat&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * gzæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    GZ(<span class="string">&quot;1f8b0800000000000000&quot;</span>,<span class="string">&quot;gz&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * batæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PROPERTIES(<span class="string">&quot;6c6f67346a2e726f6f74&quot;</span>,<span class="string">&quot;properties&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * batæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CLASS(<span class="string">&quot;cafebabe0000002e0041&quot;</span>,<span class="string">&quot;class&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * batæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    CHM(<span class="string">&quot;49545346030000006000&quot;</span>,<span class="string">&quot;chm&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * batæ–‡ä»¶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MXP(<span class="string">&quot;04000000010000001300&quot;</span>,<span class="string">&quot;mxp&quot;</span>),</span><br><span class="line">    TORRENT(<span class="string">&quot;6431303a637265617465&quot;</span>,<span class="string">&quot;torrent&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 51jobç®€å†ã€‚mht</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MHT(<span class="string">&quot;46726f6d3a3cd3c920cd&quot;</span>,<span class="string">&quot;mht&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Quicktime(mov)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    MOV(<span class="string">&quot;6D6F6F76&quot;</span>,<span class="string">&quot;mov&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * WordPerfect(wpd)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    WPD(<span class="string">&quot;FF575043&quot;</span>,<span class="string">&quot;wpd&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * OutlookExpress(dbx)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    DBX(<span class="string">&quot;CFAD12FEC5FD746F&quot;</span>,<span class="string">&quot;dbx&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Outlook(pst)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PST(<span class="string">&quot;2142444E&quot;</span>,<span class="string">&quot;pst&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Quicken(qdf)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    QDF(<span class="string">&quot;AC9EBD8F&quot;</span>,<span class="string">&quot;qdf&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * WindowsPassword(pwl)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    PWL(<span class="string">&quot;E3828596&quot;</span>,<span class="string">&quot;pwl&quot;</span>),</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * RealAudio(ram)</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    RAM(<span class="string">&quot;2E7261FD&quot;</span>,<span class="string">&quot;ram&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String code;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    FileType(String code, String name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.code = code;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      æ ¹æ®æ•°æ®æµçš„å¤´éƒ¨ä¿¡æ¯åŒ¹é…æ–‡ä»¶çš„çœŸå®æ ¼å¼
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Javaä½¿ç”¨JsoupæŠŠhtmlæµè½¬æˆApache POIçš„EXCELæ ¼å¼</title>
    <link href="https://www.chenb.top/2020/01/16/java-html-to-excel/"/>
    <id>https://www.chenb.top/2020/01/16/java-html-to-excel/</id>
    <published>2020-01-16T05:16:32.000Z</published>
    <updated>2022-11-03T08:56:40.691Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>ä¸€äº›é“¶è¡Œå¯¼å‡ºçš„excelçœŸå®æ ¼å¼ä¸ºhtmlï¼Œè¿™ç§æƒ…å†µæ— æ³•å¯¼å…¥åˆ°ç³»ç»Ÿï¼Œæ‰€ä»¥è¦ç¨‹åºä¸­è½¬æ¢ä¸€ä¸‹æ ¼å¼</p><h3 id="é€šç”¨æ–¹æ³•"><a href="#é€šç”¨æ–¹æ³•" class="headerlink" title="é€šç”¨æ–¹æ³•"></a>é€šç”¨æ–¹æ³•</h3><p>ä¸»è¦é€»è¾‘ï¼šJsoupè§£æhtmlè·å–æ‰€æœ‰tableå¯¹è±¡çš„è¡Œå’Œåˆ—ç”ŸæˆäºŒç»´æ•°ç»„ï¼Œå†æ ¹æ®äºŒç»´æ•°ç»„ç”ŸæˆWorkbookå¯¹è±¡</p><blockquote><p><strong>æ³¨æ„ï¼š</strong> è¡¨å¤´éƒ¨åˆ†æœ‰æ—¶å€™æ˜¯<code>&lt;th&gt;</code>æ ‡ç­¾</p></blockquote><p>å¦‚ä½•æ ¹æ®æ•°æ®æµåˆ¤æ–­æ˜¯å¦ä¸ºhtmlæ ¼å¼ï¼Œè¯·çœ‹å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="/2020/01/16/java-input-stream-get-file-type">Javaè·å–æ–‡ä»¶çœŸå®æ ¼å¼</a></p><figure class="highlight java"><figcaption><span>PoiUtils.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * htmlæ ¼å¼çš„æµè½¬æˆxlsæ ¼å¼çš„workbook</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Workbook <span class="title">getWorkbookByHtml</span><span class="params">(InputStream inputStream)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    Document document = Jsoup.parse(inputStream, <span class="string">&quot;UTF-8&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    ArrayList&lt;String[]&gt; dataList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    Elements rows = document.getElementsByTag(<span class="string">&quot;tr&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (Element row : rows) &#123;</span><br><span class="line">        List&lt;String&gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        Elements ths = row.getElementsByTag(<span class="string">&quot;th&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element th : ths) &#123;</span><br><span class="line">            temp.add(th.text());</span><br><span class="line">        &#125;</span><br><span class="line">        Elements tds = row.getElementsByTag(<span class="string">&quot;td&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (Element td : tds) &#123;</span><br><span class="line">            temp.add(td.text());</span><br><span class="line">        &#125;</span><br><span class="line">        String[] array = <span class="keyword">new</span> String[temp.size()];</span><br><span class="line">        temp.toArray(array);</span><br><span class="line">        dataList.add(array);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> getWorkbook(dataList);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * äºŒç»´æ•°ç»„ç”Ÿæˆworkbookå¯¹è±¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Workbook <span class="title">getWorkbook</span><span class="params">(ArrayList&lt;String[]&gt; dataList)</span> </span>&#123;</span><br><span class="line">    HSSFWorkbook result = <span class="keyword">new</span> HSSFWorkbook();</span><br><span class="line">    HSSFSheet sheet = result.createSheet(<span class="string">&quot;new sheet&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> rowNum = <span class="number">0</span>; rowNum &lt; dataList.size(); rowNum++) &#123;</span><br><span class="line">        String[] data = dataList.get(rowNum);</span><br><span class="line">        HSSFRow row = sheet.createRow(rowNum);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> columnNum = <span class="number">0</span>; columnNum &lt; data.length; columnNum++) &#123;</span><br><span class="line">            HSSFCell cell = row.createCell(columnNum);</span><br><span class="line">            cell.setCellValue(data[columnNum]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Javaä½¿ç”¨JavaCSVæŠŠCSVæµè½¬æˆApache POIçš„EXCELæ ¼å¼ï¼Œå¯ç”¨äºæ–‡ä»¶æ ¼å¼äº’è½¬å’Œä¸€äº›å…¶ä»–å¤„ç†
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
      <category term="Jsoup" scheme="https://www.chenb.top/tags/Jsoup/"/>
    
      <category term="Apache" scheme="https://www.chenb.top/tags/Apache/"/>
    
      <category term="POI" scheme="https://www.chenb.top/tags/POI/"/>
    
      <category term="Excel" scheme="https://www.chenb.top/tags/Excel/"/>
    
  </entry>
  
  <entry>
    <title>Javaåå°„è·å–å’Œä¿®æ”¹æˆå‘˜å˜é‡</title>
    <link href="https://www.chenb.top/2019/12/25/java-reflect/"/>
    <id>https://www.chenb.top/2019/12/25/java-reflect/</id>
    <published>2019-12-25T05:38:05.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<p>ç‰¹å®šçš„éœ€æ±‚éœ€è¦æ ¹æ®å‰ç«¯ä¼ çš„å­—æ®µåç§°è®¾ç½®å€¼ï¼Œè¿™æ—¶å€™ä½¿ç”¨åå°„æ¯”è¾ƒæ–¹ä¾¿</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åå°„å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectionUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä¼ å…¥çš„å±æ€§åå­—ç¬¦ä¸²ï¼Œè·å–å¯¹åº”çš„å±æ€§å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     *            å±æ€§å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj</span></span><br><span class="line"><span class="comment">     *            è¦è·å–çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">getField</span><span class="params">(String name, Object obj)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException </span>&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = obj.getClass();</span><br><span class="line">        Field field = clazz.getDeclaredField(name);</span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">return</span> field.get(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®ä¼ å…¥çš„å±æ€§åå­—ç¬¦ä¸²ï¼Œä¿®æ”¹å¯¹åº”çš„å±æ€§å€¼</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> name</span></span><br><span class="line"><span class="comment">     *            å±æ€§å</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> obj</span></span><br><span class="line"><span class="comment">     *            è¦ä¿®æ”¹çš„å®ä¾‹å¯¹è±¡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> value</span></span><br><span class="line"><span class="comment">     *            ä¿®æ”¹åçš„æ–°å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setField</span><span class="params">(String name, Object obj, Object value)</span></span></span><br><span class="line"><span class="function">            <span class="keyword">throws</span> NoSuchFieldException, SecurityException, IllegalArgumentException, IllegalAccessException </span>&#123;</span><br><span class="line">        Class&lt;?&gt; clazz = obj.getClass();</span><br><span class="line">        Field field = clazz.getDeclaredField(name);</span><br><span class="line">        field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        field.set(obj, value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchFieldException, IllegalAccessException </span>&#123;</span><br><span class="line">        IncomeTaxDeclarationMain a = <span class="keyword">new</span> IncomeTaxDeclarationMain();</span><br><span class="line">        a.row9 = BigDecimal.TEN;</span><br><span class="line">        IncomeTaxDeclarationMain b = <span class="keyword">new</span> IncomeTaxDeclarationMain();</span><br><span class="line">        setField(<span class="string">&quot;row9&quot;</span>, b, getField(<span class="string">&quot;row9&quot;</span>, a));</span><br><span class="line">        System.out.println(b.row9);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Javaåå°„è·å–å’Œä¿®æ”¹æˆå‘˜å˜é‡
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€æ¡å‘½ä»¤å®‰è£…docker</title>
    <link href="https://www.chenb.top/2019/12/18/docker-one-key/"/>
    <id>https://www.chenb.top/2019/12/18/docker-one-key/</id>
    <published>2019-12-18T08:23:06.000Z</published>
    <updated>2023-07-13T14:09:33.087Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä¸æé‚£ä¹ˆå¤æ‚ï¼Œå°±ä¸€è¡Œå‘½ä»¤æå®šï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash &lt;(curl -fSsL http://www.chenb.top/deploy/docker-install.sh)</span><br></pre></td></tr></table></figure></p><h3 id="è„šæœ¬ä»£ç "><a href="#è„šæœ¬ä»£ç " class="headerlink" title="è„šæœ¬ä»£ç "></a>è„šæœ¬ä»£ç </h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># install docker</span></span><br><span class="line"><span class="comment"># bash &lt;(curl -fSsL http://www.chenb.top/deploy/docker-install.sh)</span></span><br><span class="line"></span><br><span class="line">now=`date +%s`</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">log</span></span>() &#123;</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;[<span class="subst">$((`date +%s` - now )</span>)] ## <span class="variable">$@</span> ##&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> <span class="string">&quot;Installation start at `date`&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check</span></span><br><span class="line">[[ `whoami` != <span class="string">&quot;root&quot;</span> ]] &amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Root Privilege needed, use sudo please.&quot;</span> &amp;&amp; <span class="built_in">exit</span> 1</span><br><span class="line">OS=`awk -F= <span class="string">&#x27;/^NAME/&#123;print $2&#125;&#x27;</span> /etc/os-release | sed <span class="string">&quot;s/\&quot;//g&quot;</span>`</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$OS</span>&quot;</span> == <span class="string">&quot;Ubuntu&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">  :</span><br><span class="line"><span class="keyword">elif</span> [[ <span class="string">&quot;<span class="variable">$OS</span>&quot;</span> == <span class="string">&quot;CentOS Linux&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">  OS=<span class="string">&quot;CentOS&quot;</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;Unknown OS: \&quot;<span class="variable">$OS</span>\&quot;, exit&quot;</span></span><br><span class="line">  <span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install docker</span></span><br><span class="line"><span class="built_in">log</span> <span class="string">&quot;install and upgrade docker&quot;</span></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$OS</span>&quot;</span> == <span class="string">&quot;Ubuntu&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">  apt-get update</span><br><span class="line">  apt-get -y install apt-transport-https ca-certificates curl software-properties-common</span><br><span class="line">  curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | apt-key add -</span><br><span class="line">  add-apt-repository -u <span class="string">&quot;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="subst">$(lsb_release -cs)</span> stable&quot;</span></span><br><span class="line">  apt-get -y install docker-ce</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$OS</span>&quot;</span> == <span class="string">&quot;CentOS&quot;</span> ]];<span class="keyword">then</span></span><br><span class="line">  yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line">  yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">  yum makecache fast</span><br><span class="line">  yum -y install docker-ce</span><br><span class="line">  systemctl <span class="built_in">enable</span> docker &amp;&amp; systemctl start docker  </span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># congifure mirror and insecure registries</span></span><br><span class="line"><span class="built_in">log</span> <span class="string">&quot;congifure mirror and insecure registries&quot;</span></span><br><span class="line">cat &gt; /etc/docker/daemon.json &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">  &quot;registry-mirrors&quot;: [&quot;https://m.mirror.aliyuncs.com&quot;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line">systemctl daemon-reload &amp;&amp; systemctl restart docker</span><br><span class="line"><span class="built_in">log</span> <span class="string">&quot;Installation end at `date`&quot;</span></span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨Jenkinsçš„å‘½ä»¤"><a href="#å¯åŠ¨Jenkinsçš„å‘½ä»¤" class="headerlink" title="å¯åŠ¨Jenkinsçš„å‘½ä»¤"></a>å¯åŠ¨Jenkinsçš„å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  --name jenkins \</span><br><span class="line">  -d \</span><br><span class="line">  -u root \</span><br><span class="line">  -p 8080:8080 \</span><br><span class="line">  -v jenkins-data:/var/jenkins_home \</span><br><span class="line">  -v /var/run/docker.sock:/var/run/docker.sock \</span><br><span class="line">  -v /usr/bin/docker:/usr/bin/docker \</span><br><span class="line">  -e TZ=Asia/Shanghai \</span><br><span class="line">  -v <span class="string">&quot;<span class="variable">$HOME</span>&quot;</span>:/home \</span><br><span class="line">  -m 2g \</span><br><span class="line">  jenkins/jenkins:2.401.1</span><br></pre></td></tr></table></figure><h3 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h3><p>GitHubé¡¹ç›®åœ°å€ï¼š<a href="https://github.com/chenbin-353549444/deploy">https://github.com/chenbin-353549444/deploy</a><br>å‚è€ƒåˆ«äººçš„é¡¹ç›®ï¼š<a href="https://github.com/wrfly/k8s-install.sh">https://github.com/wrfly/k8s-install.sh</a><br>å®˜ç½‘å®‰è£…é“¾æ¥ï¼š<a href="https://docs.docker.com/install/linux/docker-ce/centos/">https://docs.docker.com/install/linux/docker-ce/centos/</a></p>]]></content>
    
    <summary type="html">
    
      ä¸æé‚£ä¹ˆå¤æ‚ï¼Œå°±ä¸€è¡Œå‘½ä»¤æå®šï¼Œå†™ä¸€ä¸ªè„šæœ¬å°±å¯ä»¥äº†
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Shell" scheme="https://www.chenb.top/tags/Shell/"/>
    
      <category term="Docker" scheme="https://www.chenb.top/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Dockerå®šåˆ¶é•œåƒ</title>
    <link href="https://www.chenb.top/2019/12/03/docker-java-mysql-redis/"/>
    <id>https://www.chenb.top/2019/12/03/docker-java-mysql-redis/</id>
    <published>2019-12-03T02:22:09.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>é¡¹ç›®æ–°å¢äº†redisç›¸å…³çš„ä¾èµ–åï¼Œå˜çš„è¶Šæ¥è¶Šåºå¤§ï¼Œéƒ¨ç½²ä¹Ÿå¾ˆéº»çƒ¦äº†ï¼ŒCTOæƒ³æŠŠè¿™äº›ç¯å¢ƒéƒ½æ‰“åŒ…åˆ°ä¸€ä¸ªé•œåƒä¸­å»åšä¸€ä¸ªminiç‰ˆæœ¬ï¼Œç”¨äºæµ‹è¯•å’Œå®¢æˆ·çš„ä¸´æ—¶è¯•ç”¨ã€‚<br>è¿™æ ·åšä¼¼ä¹è¿èƒŒäº†Dockerä¸€ä¸ªå®¹å™¨å†…åªæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹çš„è®¾è®¡åŸåˆ™ï¼Œä½†æ˜¯èƒ½è®©åˆå­¦è€…ä½é—¨æ§›ä½¿ç”¨é•œåƒï¼Œä¹Ÿæ˜¯æœ‰äº›ä½œç”¨çš„ã€‚</p><h3 id="æ–‡ä»¶ç»“æ„"><a href="#æ–‡ä»¶ç»“æ„" class="headerlink" title="æ–‡ä»¶ç»“æ„"></a>æ–‡ä»¶ç»“æ„</h3><ul><li><code>Dockerfile</code> :é•œåƒæ„å»ºè„šæœ¬ï¼Œç¯å¢ƒå®‰è£…å’Œåˆå§‹åŒ–ï¼Œåªè¿è¡Œä¸€æ¬¡</li><li><code>docker-entrypoint.sh</code> :å®¹å™¨å…¥å£è„šæœ¬ï¼Œå¼€å¯æœåŠ¡ï¼Œæ¯æ¬¡å¯åŠ¨å®¹å™¨éƒ½ä¼šè¿è¡Œ</li><li><code>mysql-init.sh</code> :MySQLåˆå§‹åŒ–è„šæœ¬ï¼Œåœ¨æ„å»ºé•œåƒæ—¶è°ƒç”¨</li><li><code>mysql.cnf</code> <code>mysqld.cnf</code> :MySQLé…ç½®æ–‡ä»¶</li><li><code>schema.sql</code> <code>data.sql</code> :MySQLåˆå§‹åŒ–sqlæ–‡ä»¶ï¼Œè¡¨ç»“æ„å’Œé¢„ç½®æ•°æ®</li><li><code>Jenkinsfile</code> :æŒç»­é›†æˆè„šæœ¬</li></ul><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p>é€‰æ‹©Ubuntuä½œä¸ºåŸºç¡€é•œåƒå®‰è£…è½¯ä»¶éå¸¸æ–¹ä¾¿ï¼Œä»¥åä¹Ÿå¥½æ‰©å±•<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">18.04</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update &amp;&amp; \</span></span><br><span class="line"><span class="bash">    apt-get install -y redis-server \</span></span><br><span class="line"><span class="bash">                       openjdk-8-jdk \</span></span><br><span class="line"><span class="bash">                       mysql-server \</span></span><br><span class="line"><span class="bash">                       mysql-client</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> miniFund/docker-entrypoint.sh /docker-entrypoint.sh</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> miniFund/mysql-init.sh /mysql-init.sh</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> miniFund/mysql.cnf /etc/mysql/conf.d/mysql.cnf</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> miniFund/mysqld.cnf /etc/mysql/mysql.conf.d/mysqld.cnf</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> src/main/resources/db/migration/V1.0__schema.sql schema.sql</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> src/main/resources/db/migration/V1.1__import_presetTable_data.sql data.sql</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> target/efi-1.0.jar app.jar</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> chmod 777 /docker-entrypoint.sh &amp;&amp; chmod 777 /mysql-init.sh</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> [<span class="string">&quot;/bin/bash&quot;</span>, <span class="string">&quot;-c&quot;</span>, <span class="string">&quot;/mysql-init.sh&quot;</span>]</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="bash"> [<span class="string">&quot;/docker-entrypoint.sh&quot;</span>]</span></span><br></pre></td></tr></table></figure></p><h3 id="docker-entrypoint-sh"><a href="#docker-entrypoint-sh" class="headerlink" title="docker-entrypoint.sh"></a>docker-entrypoint.sh</h3><p>docker-entrypoint.shæ˜¯å®¹å™¨å…¥å£è„šæœ¬ï¼Œé‡Œé¢å¯ä»¥å¯åŠ¨æœåŠ¡ï¼Œéœ€è¦æ³¨æ„ï¼šå‰å‡ æ¡æ˜¯åå°å¯åŠ¨ï¼Œæœ€åä¸€æ¡è¦å‰å°å¯åŠ¨ï¼Œä¸ç„¶å®¹å™¨ä¼šè‡ªåŠ¨é€€å‡º<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment"># å¯åŠ¨mysql</span></span><br><span class="line">/etc/init.d/mysql <span class="built_in">start</span></span><br><span class="line"><span class="comment"># å¯åŠ¨redis</span></span><br><span class="line">redis<span class="literal">-server</span> &amp;</span><br><span class="line"><span class="comment"># å¯åŠ¨java</span></span><br><span class="line">java <span class="literal">-Duser</span>.timezone=Asia/Shanghai <span class="literal">-Djava</span>.security.egd=file:/dev/./urandom <span class="literal">-Dspring</span>.profiles.active=mini <span class="literal">-jar</span> /app.jar</span><br></pre></td></tr></table></figure></p><h3 id="mysql-init-sh"><a href="#mysql-init-sh" class="headerlink" title="mysql-init.sh"></a>mysql-init.sh</h3><p>mysql-init.shæ˜¯MySQLåˆå§‹åŒ–è„šæœ¬ï¼ŒåŒ…æ‹¬è®¾ç½®rootå¯†ç ï¼Œæƒé™ï¼Œæ•°æ®åº“åˆå§‹åŒ–ï¼Œç¼–ç è®¾ç½®ç­‰æ“ä½œ<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="comment">## mysqlåˆå§‹åŒ–è„šæœ¬</span></span><br><span class="line">/etc/init.d/mysql <span class="built_in">start</span></span><br><span class="line">mysql &lt;&lt;&lt;<span class="string">&quot;CREATE DATABASE IF NOT EXISTS efi CHARACTER SET &#x27;utf8mb4&#x27; COLLATE &#x27;utf8mb4_general_ci&#x27;;&quot;</span></span><br><span class="line">mysql efi &lt; schema.sql</span><br><span class="line">mysql efi &lt; data.sql</span><br><span class="line">mysql &lt;&lt;&lt;<span class="string">&quot;update mysql.user set authentication_string=PASSWORD(&#x27;123456&#x27;), plugin=&#x27;mysql_native_password&#x27;, host=&#x27;%&#x27; where user=&#x27;root&#x27;;flush privileges;&quot;</span></span><br><span class="line">/etc/init.d/mysql restart</span><br></pre></td></tr></table></figure></p><ul><li>è¿™é‡Œçš„rootå¯†ç è®¾ç½®çš„å¾ˆç®€å•ï¼Œhostä¹Ÿè®¾ç½®æˆäº†%ï¼Œæ˜¯ä¸ºäº†è·‘å‹åŠ›æµ‹è¯•è½¯ä»¶ç”¨çš„ï¼Œå¦‚æœæ˜¯ç»™å®¢æˆ·è¯•ç”¨å°±ä¸ç”¨å¼€MySQLè®¿é—®æƒé™äº†ã€‚</li><li>ä¸»è¦è§£å†³é—®é¢˜ï¼šæƒé™ã€ç¼–ç ã€äº¤äº’å¼è„šæœ¬</li><li><code>schema.sql</code>æ˜¯è¡¨ç»“æ„ï¼Œ<code>data.sql</code>æ˜¯é¢„ç½®æ•°æ®</li></ul><h3 id="MySQLé…ç½®æ–‡ä»¶"><a href="#MySQLé…ç½®æ–‡ä»¶" class="headerlink" title="MySQLé…ç½®æ–‡ä»¶"></a>MySQLé…ç½®æ–‡ä»¶</h3><p><code>mysql.cnf</code>: /etc/mysql/conf.d/mysql.cnf<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">mysql</span>]</span><br><span class="line"><span class="comment"># æ·»åŠ ç¼–ç è®¾ç½®</span></span><br><span class="line"><span class="string">default-character-set=utf8</span></span><br></pre></td></tr></table></figure><br><code>mysqld.cnf</code>: /etc/mysql/mysql.conf.d/mysqld.cnf<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line">[<span class="string">mysqld</span>]</span><br><span class="line"><span class="comment"># å»æ‰hosté™åˆ¶</span></span><br><span class="line"><span class="comment"># bind-address = 127.0.0.1</span></span><br><span class="line"><span class="comment"># æ·»åŠ ç¼–ç è®¾ç½®</span></span><br><span class="line"><span class="string">character-set-server=utf8</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><br>ç¼–ç æŸ¥çœ‹è¯­å¥ï¼š<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;%char%&#x27;</span>;</span><br></pre></td></tr></table></figure></p><h3 id="Jenkinsfile"><a href="#Jenkinsfile" class="headerlink" title="Jenkinsfile"></a>Jenkinsfile</h3><p>æŒç»­é›†æˆè„šæœ¬ï¼Œå…ˆæ„å»ºjaråŒ…ï¼Œå†æ„å»ºminifundé•œåƒ<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#!groovy</span><br><span class="line">pipeline &#123;</span><br><span class="line">    agent none</span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">            agent &#123;</span><br><span class="line">                docker &#123;</span><br><span class="line">                    image <span class="string">&#x27;maven:3.5.0-jdk-8-alpine&#x27;</span></span><br><span class="line">                    args <span class="string">&#x27;-v mavenRepository:/root/.m2 -e TZ=Asia/Shanghai&#x27;</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;mvn -B -DskipTests clean package --settings settings.xml&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        stage(<span class="string">&#x27;Deliver&#x27;</span>) &#123;</span><br><span class="line">            agent any</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;docker build -f miniFund/Dockerfile -t minifund .&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="å®¹å™¨ä½¿ç”¨"><a href="#å®¹å™¨ä½¿ç”¨" class="headerlink" title="å®¹å™¨ä½¿ç”¨"></a>å®¹å™¨ä½¿ç”¨</h3><p>æŒ‰ä¸Šé¢çš„è„šæœ¬æ„å»ºå‡ºçš„minifundé•œåƒï¼Œç›´æ¥å¯åŠ¨å°±æœ‰ä¸€ä¸ªå®Œæ•´çš„åç«¯ç¯å¢ƒäº†ï¼Œä½¿ç”¨è€…ä¸ç”¨å…³å¿ƒrediså’Œmysqlçš„éƒ¨ç½²ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 8088:8088 -p 7654:3306 --name mini minifund</span><br></pre></td></tr></table></figure></p><h3 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h3><p>æ„å»ºå¥½çš„é•œåƒä¿è¯50äººæ­£å¸¸ä½¿ç”¨æ—¶è¦å 1Gå†…å­˜ï¼Œé™ä½èµ„æºæ¶ˆè€—éœ€è¦é•¿æœŸçš„å„ç§ä¼˜åŒ–ï¼Œå½“ç¡¬ä»¶ç¯å¢ƒæœ‰é™åˆ¶çš„æ—¶å€™ï¼Œä»£ç çš„é—®é¢˜å°±ä¼šæ˜¾ç¤ºå‡ºæ¥äº†ã€‚<br>å¦å¤–ï¼Œå¤§æ‚çƒ©è¿˜æ˜¯å¾®æœåŠ¡ï¼Œè¿™æ˜¯ä¸ªé—®é¢˜</p>]]></content>
    
    <summary type="html">
    
      Dockerå®šåˆ¶é•œåƒï¼ŒåŒ…å«Javaã€Redisã€Mysqlç­‰æœåŠ¡
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
      <category term="MySQL" scheme="https://www.chenb.top/tags/MySQL/"/>
    
      <category term="Docker" scheme="https://www.chenb.top/tags/Docker/"/>
    
      <category term="Redis" scheme="https://www.chenb.top/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>Spring booté›†æˆåˆ†å¸ƒå¼é”Redisson</title>
    <link href="https://www.chenb.top/2019/10/10/spring-boot-redisson/"/>
    <id>https://www.chenb.top/2019/10/10/spring-boot-redisson/</id>
    <published>2019-10-10T05:55:53.000Z</published>
    <updated>2022-11-03T08:56:40.690Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>å¼•å…¥é”æœºåˆ¶ååŸºæœ¬æ»¡è¶³äº†è½¯ä»¶çš„å¹¶å‘éœ€æ±‚ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼š</p><ol><li>ç³»ç»Ÿå˜æ…¢äº†ï¼Œå½“ç”¨æˆ·è¿›è¡Œä¸€äº›æ…¢é€Ÿçš„ä¿®æ”¹æ“ä½œæ—¶ï¼ˆå¯¼å…¥ï¼Œæ‰¹é‡ç­‰ï¼‰ï¼Œå…¶ä»–ç”¨æˆ·è¿›è¡ŒåŒç±»æ“ä½œéœ€è¦ç­‰å¾…è§£é”ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦ç»“åˆä¸šåŠ¡å®é™…æƒ…å†µç»†åŒ–é”çš„ç²’åº¦</li><li>ä¸åŒçš„æœåŠ¡ä¹‹é—´ä¸èƒ½å…±äº«é”ï¼Œå¯¼è‡´åˆ†å¸ƒå¼çš„ç¯å¢ƒå°æ¦‚ç‡å‡ºç°å¹¶å‘é—®é¢˜</li></ol><p>ä¹‹å‰çš„äº’æ–¥é”ï¼š<a href="/2019/05/21/spring-boot-aop-lock">è‡ªå®šä¹‰æ³¨è§£+AOPå®ç°äº’æ–¥é”</a><br>ä»¥ä¸Šæƒ…å†µéšç€ä¸šåŠ¡é‡çš„å¢åŠ ä¼šè¶Šæ¥è¶Šæ˜æ˜¾ï¼Œç®€å•çš„äº’æ–¥é”é¢„è®¡åªèƒ½æ’‘åˆ°å¹´åº•ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥Redisson</p><h3 id="æ”¹è¿›äº’æ–¥é”æ–¹æ¡ˆ"><a href="#æ”¹è¿›äº’æ–¥é”æ–¹æ¡ˆ" class="headerlink" title="æ”¹è¿›äº’æ–¥é”æ–¹æ¡ˆ"></a>æ”¹è¿›äº’æ–¥é”æ–¹æ¡ˆ</h3><p>æœ€åˆçš„æƒ³æ³•æ˜¯æ”¹è¿›åŸå…ˆçš„äº’æ–¥é”ï¼Œç»†åŒ–é”çš„ç²’åº¦ï¼Œç®€å•çš„è¯´å°±æ˜¯å„äººå–ä¸ªäººçš„é”ã€‚é‚£ä¹ˆéœ€è¦è‡ªå·±å†™å­˜å…¥é”å’Œå–å‡ºé”çš„è§„åˆ™ï¼Œè¿˜è¦è€ƒè™‘å¾ˆå¤šå¹¶å‘çš„æƒ…å†µï¼Œå±äºé€ è½®å­ã€‚<br>åæ¥CTOå»ºè®®æˆ‘ç”¨Redissonï¼Œäº†è§£åå‘ç°å®Œç¾è§£å†³äº†é—®é¢˜ï¼Œäºæ˜¯æ”¾å¼ƒäº†è¿™ä¸ªæ–¹æ¡ˆã€‚</p><h3 id="å…³äºRedis"><a href="#å…³äºRedis" class="headerlink" title="å…³äºRedis"></a>å…³äºRedis</h3><p>ç”±äºRedissonæ˜¯åŸºäºRedisçš„ï¼Œæ‰€ä»¥è¦å…ˆéƒ¨ç½²Redisï¼Œå’Œå…¶ä»–åº”ç”¨ä¸€æ ·ï¼Œç›´æ¥å¼€ä¸€ä¸ªDockerå®¹å™¨å°±è¡Œäº†ï¼Œå‚è€ƒ<a href="https://hub.docker.com/_/redis">DockerHub Redis</a></p><blockquote><p>æ³¨æ„ï¼šæœ€åˆæ˜¯åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šæµ‹è¯•çš„ï¼Œrediså®¹å™¨æ²¡åŠ å¯†ç ï¼Œç»“æœè¿‡å‡ å¤©å°±è¢«æŒ–çŸ¿äº†ï¼Œäºæ˜¯è€è€å®å®åŠ ä¸Šå¯†ç </p></blockquote><p>redisåŠ å¯†ç ï¼šredis.confä¸­ä¿®æ”¹ä¸¤è¡Œ<br><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŠŠhosté™åˆ¶æ³¨é‡Šæ‰</span></span><br><span class="line"><span class="string">bind</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line"><span class="comment"># æ‰“å¼€å¯†ç è®¾ç½®</span></span><br><span class="line"><span class="string">requirepass</span> <span class="string">XXXXXXXX</span></span><br></pre></td></tr></table></figure><br><strong><code>æ¨è:</code></strong> Windowsä¸Šçš„å…è´¹Rediså¯è§†åŒ–å·¥å…·  <a href="http://electronjs.org/apps/anotherredisdesktopmanager">AnotherRedisDesktopManager</a><br><strong><code>æ”¶è—:</code></strong> Windowsä¸ŠRedisçš„å®‰è£…åŒ…  <a href="https://www.nuget.org/packages/Redis-64/3.0.500">Redis-64</a></p><h3 id="æ·»åŠ Mavenä¾èµ–"><a href="#æ·»åŠ Mavenä¾èµ–" class="headerlink" title="æ·»åŠ Mavenä¾èµ–"></a>æ·»åŠ Mavenä¾èµ–</h3><p>pom.xmlä¸­æ·»åŠ <br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.redisson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>redisson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="æ·»åŠ Redissoné…ç½®ç±»"><a href="#æ·»åŠ Redissoné…ç½®ç±»" class="headerlink" title="æ·»åŠ Redissoné…ç½®ç±»"></a>æ·»åŠ Redissoné…ç½®ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> chenbin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedissonConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;redisson.address&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> RedissonClient <span class="title">getRedisson</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Config config = <span class="keyword">new</span> Config();</span><br><span class="line">        config.useSingleServer().setAddress(address);</span><br><span class="line">        config.useSingleServer().setPassword(<span class="string">&quot;XXXXXXXX&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Redisson.create(config);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºæ¯ä¸ªç¯å¢ƒredisåœ°å€ä¸åŒï¼ŒæŠŠåœ°å€æ”¾åˆ°å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¸­äº†<br><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">redisson.address</span>=<span class="string">redis://127.0.0.1:6379</span></span><br></pre></td></tr></table></figure></p><h3 id="æ–°ç‰ˆçš„åˆ‡é¢ä»£ç "><a href="#æ–°ç‰ˆçš„åˆ‡é¢ä»£ç " class="headerlink" title="æ–°ç‰ˆçš„åˆ‡é¢ä»£ç "></a>æ–°ç‰ˆçš„åˆ‡é¢ä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŒæ­¥é” AOP</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> chenbin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Profile(NOT_DEVELOPMENT)</span></span><br><span class="line"><span class="meta">@Scope</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.profiles.active&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String active;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedissonClient redissonClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Serviceå±‚åˆ‡ç‚¹     ç”¨äºè®°å½•é”™è¯¯æ—¥å¿—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.hongfund.efi.service.lock.ServiceLock)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockAspect</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;lockAspect()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line">        String accountBookId = request.getHeader(<span class="string">&quot;accountBookId&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(accountBookId)) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> ServiceException(<span class="string">&quot;è´¦å¥—æ ¡éªŒå¤±è´¥!&quot;</span>, ErrorCode.BAD_REQUEST);</span><br><span class="line">        &#125;</span><br><span class="line">        RLock lock = redissonClient.getLock(active + <span class="string">&quot;_&quot;</span> + accountBookId);</span><br><span class="line">        <span class="keyword">boolean</span> res = lock.tryLock(<span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">        Object obj;</span><br><span class="line">        <span class="keyword">if</span> (res) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                obj = joinPoint.proceed();</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> ServiceException(<span class="string">&quot;å…¶ä»–ç”¨æˆ·æ­£åœ¨æ“ä½œï¼Œè¯·ç­‰å¾…!&quot;</span>, ErrorCode.BAD_REQUEST);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿™é‡Œæ ¹æ®ä¸šåŠ¡æƒ…å†µæŠŠé”ç»†åŒ–åˆ°è´¦å¥—çº§åˆ«</li><li>ä¸ºé˜²æ­¢æœ¬åœ°ç¯å¢ƒæŠ¥é”™ï¼Œè®¾ç½®ä¸ºéæµ‹è¯•ç¯å¢ƒè¿‡æ»¤</li><li>æ›´æ–°åæš‚æ—¶æ²¡é—®é¢˜ï¼Œè¿˜éœ€è¦æµ‹è¯•æ€§èƒ½å’Œå‚æ•°è°ƒä¼˜åå†å†³å®šæ˜¯å¦ä¸Šçº¿</li></ul><p><strong><code>å‚è€ƒ:</code></strong>  <a href="https://github.com/redisson/redisson/wiki">Redissonå®˜æ–¹æ–‡æ¡£</a></p>]]></content>
    
    <summary type="html">
    
      åœ¨åŸæœ‰äº’æ–¥é”åŸºç¡€ä¸Šæ”¹è¿›ä¸ºç»†ç²’åº¦é”
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
      <category term="Redis" scheme="https://www.chenb.top/tags/Redis/"/>
    
      <category term="Redisson" scheme="https://www.chenb.top/tags/Redisson/"/>
    
  </entry>
  
  <entry>
    <title>Nodeè¯­éŸ³è¯†åˆ«</title>
    <link href="https://www.chenb.top/2019/06/26/node-ffmpeg/"/>
    <id>https://www.chenb.top/2019/06/26/node-ffmpeg/</id>
    <published>2019-06-26T05:47:02.000Z</published>
    <updated>2022-11-03T08:56:40.690Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯­éŸ³è¯†åˆ«ï¼ˆæ”¯æŒpcmå’Œm4aï¼‰"><a href="#è¯­éŸ³è¯†åˆ«ï¼ˆæ”¯æŒpcmå’Œm4aï¼‰" class="headerlink" title="è¯­éŸ³è¯†åˆ«ï¼ˆæ”¯æŒpcmå’Œm4aï¼‰"></a>è¯­éŸ³è¯†åˆ«ï¼ˆæ”¯æŒpcmå’Œm4aï¼‰</h2><p>æµ‹è¯•ï¼š <a href="http://web.chenb.top">http://web.chenb.top</a><br>Githubé¡¹ç›®ï¼š <a href="https://github.com/chenbin-353549444/node-ffmpeg">https://github.com/chenbin-353549444/node-ffmpeg</a></p><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä½¿ç”¨ç™¾åº¦çš„è¯­éŸ³è¯†åˆ«æ¥å£ï¼Œç”¨FFMPEGè½¬éŸ³é¢‘æ–‡ä»¶</p><h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><p>ä¿®æ”¹server.jsçš„<code>API Key</code>å’Œ<code>Secret Key</code><br>åœ¨å®‰è£…å¥½Dockerçš„æœºå™¨ä¸Šè¿è¡Œ<code>sh run.sh</code>ï¼Œå¦‚æœæœ‰Jenkinså¯ä»¥ç›´æ¥æ–°å»ºç®¡é“æ„å»º<br>å®Œæˆåè®¿é—®æµ‹è¯•é¡µé¢(<a href="http://127.0.0.1:80/index.htm">http://127.0.0.1:80/index.htm</a>)<br><img src="/images/view.jpg" alt=""></p><h3 id="æ ¸å¿ƒä»£ç "><a href="#æ ¸å¿ƒä»£ç " class="headerlink" title="æ ¸å¿ƒä»£ç "></a>æ ¸å¿ƒä»£ç </h3><p>server.js<br><figure class="highlight javascript"><figcaption><span>1.8</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> ffmpeg = <span class="built_in">require</span>(<span class="string">&#x27;fluent-ffmpeg&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> app = express();</span><br><span class="line"><span class="keyword">let</span> AipSpeech = <span class="built_in">require</span>(<span class="string">&quot;baidu-aip-sdk&quot;</span>).speech;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç™¾åº¦è¯­éŸ³åº”ç”¨åå°ä¸­çš„`API Key`å’Œ`Secret Key`</span></span><br><span class="line"><span class="keyword">let</span> client = <span class="keyword">new</span> AipSpeech(<span class="number">0</span>, <span class="string">&#x27;API Key&#x27;</span>, <span class="string">&#x27;Secret Key&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> multer  = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>);</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/public&#x27;</span>, express.static(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line">app.use(bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;));</span><br><span class="line">app.use(multer(&#123; <span class="attr">dest</span>: <span class="string">&#x27;/tmp/&#x27;</span>&#125;).array(<span class="string">&#x27;buf&#x27;</span>));</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.sendFile( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.htm&quot;</span> );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/pcm&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(req.files[<span class="number">0</span>]);  <span class="comment">// ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">    fs.readFile( req.files[<span class="number">0</span>].path, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> voiceBase64 = <span class="keyword">new</span> Buffer(data);</span><br><span class="line">        client.recognize(voiceBase64, <span class="string">&#x27;pcm&#x27;</span>, <span class="number">16000</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            res.end(<span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            res.end(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/m4a&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>,&#123;<span class="string">&#x27;Content-Type&#x27;</span>:<span class="string">&#x27;text/html;charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(req);  <span class="comment">// ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">let</span> voiceBase64 = <span class="keyword">new</span> Buffer(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> command = ffmpeg(req.files[<span class="number">0</span>].path)</span><br><span class="line">        .noVideo()</span><br><span class="line">        .inputFormat(<span class="string">&#x27;m4a&#x27;</span>)</span><br><span class="line">        .audioCodec(<span class="string">&#x27;pcm_s16le&#x27;</span>)</span><br><span class="line">        .audioBitrate(<span class="number">16</span>)</span><br><span class="line">        .audioFrequency(<span class="number">16000</span>)</span><br><span class="line">        .audioChannels(<span class="number">1</span>)</span><br><span class="line">        .format(<span class="string">&#x27;s16le&#x27;</span>)</span><br><span class="line">        .on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;An error occurred: &#x27;</span> + err.message);</span><br><span class="line">        &#125;)</span><br><span class="line">        .on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;success&#x27;</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="keyword">let</span> ffstream = command.pipe();</span><br><span class="line">    ffstream.on(<span class="string">&#x27;data&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">chunk</span>) </span>&#123;</span><br><span class="line">        voiceBase64 = Buffer.concat([voiceBase64, <span class="keyword">new</span> Buffer(chunk)]);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;ffmpeg just wrote &#x27;</span> + chunk.length + <span class="string">&#x27; bytes&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">    ffstream.on(<span class="string">&#x27;end&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;data &#x27;</span> + voiceBase64.length + <span class="string">&#x27; bytes&#x27;</span>);</span><br><span class="line">        client.recognize(voiceBase64, <span class="string">&#x27;pcm&#x27;</span>, <span class="number">16000</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">result</span>) </span>&#123;</span><br><span class="line">            res.end(<span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            res.end(err);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> server = app.listen(<span class="number">80</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> host = server.address().address;</span><br><span class="line">    <span class="keyword">var</span> port = server.address().port;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p>ç™¾åº¦æ¥å£æ–‡æ¡£:(<a href="http://ai.baidu.com/docs#/ASR-Online-Node-SDK/8b3186c3">http://ai.baidu.com/docs#/ASR-Online-Node-SDK/8b3186c3</a>)<br>node-fluent-ffmpeg:(<a href="https://github.com/fluent-ffmpeg/node-fluent-ffmpeg#creating-an-ffmpeg-command">https://github.com/fluent-ffmpeg/node-fluent-ffmpeg#creating-an-ffmpeg-command</a>)<br>FFMPEG:(<a href="http://www.ffmpeg.org">http://www.ffmpeg.org</a>)</p>]]></content>
    
    <summary type="html">
    
      Nodeè¯­éŸ³è¯†åˆ«ï¼Œç›®å‰æ”¯æŒm4aã€pcmæ ¼å¼ï¼Œä½¿ç”¨ç™¾åº¦çš„è¯­éŸ³è¯†åˆ«æ¥å£ï¼Œç”¨FFMPEGè½¬éŸ³é¢‘æ–‡ä»¶
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Node" scheme="https://www.chenb.top/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>Spring boot è‡ªå®šä¹‰æ³¨è§£+AOPå®ç°äº’æ–¥é”</title>
    <link href="https://www.chenb.top/2019/05/21/spring-boot-aop-lock/"/>
    <id>https://www.chenb.top/2019/05/21/spring-boot-aop-lock/</id>
    <published>2019-05-21T07:48:36.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>éšç€ä¸šåŠ¡é‡çš„ä¸æ–­å¢é•¿ï¼Œå¹¶å‘é—®é¢˜æ—¶æœ‰å‡ºç°ï¼Œè¦è§£å†³è¿™äº›é—®é¢˜éœ€è¦å¼•å…¥é”æœºåˆ¶</p><h3 id="åŒæ­¥å…³é”®å­—è§£å†³æ–¹æ¡ˆ"><a href="#åŒæ­¥å…³é”®å­—è§£å†³æ–¹æ¡ˆ" class="headerlink" title="åŒæ­¥å…³é”®å­—è§£å†³æ–¹æ¡ˆ"></a>åŒæ­¥å…³é”®å­—è§£å†³æ–¹æ¡ˆ</h3><p>æœ€åˆåœ¨æ–¹æ³•ä¸ŠåŠ åŒæ­¥å…³é”®å­—<code>synchronized</code>ï¼Œè¿™ç§æ–¹å¼åªèƒ½é™åˆ¶åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•ï¼Œä¸åŒç±»ä¸­çš„æ–¹æ³•ä»ç„¶å¯ä»¥å¹¶å‘<br>é‚£ä¹ˆå¯ä»¥ä½¿ç”¨åŒæ­¥ä»£ç å—è§£å†³è¯¥é—®é¢˜ï¼Œå®šä¹‰ä¸€ä¸ªå…¬å…±çš„é”ï¼Œç„¶ååœ¨éœ€è¦åŒæ­¥çš„æ–¹æ³•å¼€å§‹å’Œç»“æŸåŠ ä¸ŠåŒæ­¥ä»£ç å—ï¼Œè¿™æ ·å°±èƒ½è§£å†³é—®é¢˜äº†ï¼Œä½†æ˜¯è¿™ç§å†™æ³•å¾ˆç¹çï¼Œéœ€è¦æ¯ä¸ªæ–¹æ³•å¤´å°¾å»åŠ ä»£ç ï¼Œç”±æ­¤æƒ³åˆ°äº†AOPå’Œè‡ªå®šä¹‰æ³¨è§£</p><h3 id="å®šä¹‰é”æ³¨è§£"><a href="#å®šä¹‰é”æ³¨è§£" class="headerlink" title="å®šä¹‰é”æ³¨è§£"></a>å®šä¹‰é”æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.PARAMETER, ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ServiceLock &#123;</span><br><span class="line">    <span class="function">String <span class="title">description</span><span class="params">()</span> <span class="keyword">default</span> &quot;service lock&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="AOPåˆ‡é¢"><a href="#AOPåˆ‡é¢" class="headerlink" title="AOPåˆ‡é¢"></a>AOPåˆ‡é¢</h3><p>åœ¨Serviceå±‚å®šä¹‰åˆ‡é¢ï¼Œæ–¹æ³•æ‰§è¡Œå‰ååˆ†åˆ«åŠ é”å’Œè§£é”ï¼Œä½¿ç”¨æ—¶éœ€è¦åŒæ­¥çš„æ–¹æ³•åŠ ä¸Š<code>@ServiceLock</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŒæ­¥é” AOP</span></span><br><span class="line"><span class="comment"> * https://docs.spring.io/spring/docs/4.3.14.RELEASE/spring-framework-reference/htmlsingle/#transaction-declarative-annotations</span></span><br><span class="line"><span class="comment"> * https://docs.spring.io/spring/docs/4.3.14.RELEASE/javadoc-api/</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Scope</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockAspect</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * äº’æ–¥é” å‚æ•°é»˜è®¤falseï¼Œä¸å…¬å¹³é”</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Lock lock = <span class="keyword">new</span> ReentrantLock(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Serviceå±‚åˆ‡ç‚¹     ç”¨äºè®°å½•é”™è¯¯æ—¥å¿—</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.xxx.xxx.service.lock.ServiceLock)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">lockAspect</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;lockAspect()&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        lock.lock();</span><br><span class="line">        Object obj;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            obj = joinPoint.proceed();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      Spring boot è‡ªå®šä¹‰æ³¨è§£+AOPå®ç°äº’æ–¥é”
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
      <category term="Spring boot" scheme="https://www.chenb.top/tags/Spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>Javaå®ç°æ•°å­¦å…¬å¼è®¡ç®—</title>
    <link href="https://www.chenb.top/2019/05/20/java-rpn/"/>
    <id>https://www.chenb.top/2019/05/20/java-rpn/</id>
    <published>2019-05-20T09:48:52.000Z</published>
    <updated>2022-01-20T02:23:10.008Z</updated>
    
    <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>æœ€è¿‘å›½å®¶ç¨åŠ¡æ”¿ç­–å˜åŠ¨ï¼Œè´¢åŠ¡æŠ¥è¡¨éœ€è¦æ›´æ–°å…¬å¼å’Œæ ¼å¼äº†ï¼Œè¿™ç±»æ›´æ–°ç»å¸¸ä¼šå‘ç”Ÿï¼Œä¸ºäº†ä»¥åç»´æŠ¤æ–¹ä¾¿ï¼Œæƒ³åˆ°äº†è§£æå­—ç¬¦ä¸²æ ¼å¼çš„æ•°å­¦å…¬å¼ã€‚æŸ¥é˜…äº†ä¸€ä¸‹èµ„æ–™ï¼Œå¯ä»¥ç”¨é€†æ³¢å…°è¡¨è¾¾å¼å®ç°ã€‚</p><h3 id="ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼"><a href="#ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼" class="headerlink" title="ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼"></a>ä¸­ç¼€è¡¨è¾¾å¼è½¬åç¼€è¡¨è¾¾å¼</h3><p>ä¸­ç¼€è¡¨è¾¾å¼ï¼šå¹³å¸¸è§åˆ°çš„è¡¨è¾¾å¼ï¼Œå¦‚<code>3+(5*(6-1/2))</code><br>åç¼€è¡¨è¾¾å¼ï¼šå³é€†æ³¢å…°è¡¨è¾¾å¼ï¼ŒæŒ‡çš„æ˜¯ä¸åŒ…å«æ‹¬å·ï¼Œè¿ç®—ç¬¦æ”¾åœ¨ä¸¤ä¸ªè¿ç®—å¯¹è±¡çš„åé¢ï¼Œæ‰€æœ‰çš„è®¡ç®—æŒ‰è¿ç®—ç¬¦å‡ºç°çš„é¡ºåºï¼Œä¸¥æ ¼ä»å·¦å‘å³è¿›è¡Œï¼ˆä¸å†è€ƒè™‘è¿ç®—ç¬¦çš„ä¼˜å…ˆè§„åˆ™ï¼‰ï¼Œæ—¢ç„¶æ²¡äº†è¿ç®—ç¬¦çš„ä¼˜å…ˆè§„åˆ™ï¼Œé‚£ä¹ˆè®¡ç®—æœºè§£æèµ·æ¥è‡ªç„¶å®¹æ˜“çš„å¤šã€‚ä¸Šé¢çš„ä¸­ç¼€è¡¨è¾¾å¼å¯¹åº”çš„åç¼€è¡¨è¾¾å¼<code>[3, 5, 6, 1, 2, /, -, *, +]</code><br>è§£æå…¬å¼éœ€è¦å…ˆå°†é€šä¿—çš„ä¸­ç¼€è¡¨è¾¾å¼è½¬åŒ–æˆåç¼€è¡¨è¾¾å¼ï¼Œå…·ä½“ç®—æ³•å¦‚ä¸‹ï¼š</p><ul><li>é¦–å…ˆè®¾ç½®è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ï¼ˆè¿™æ ·è®¾ç½®ä¹Ÿæ˜¯ä¸ºäº†ç®€åŒ–ç¨‹åºï¼‰ï¼š <ul><li><code>null</code> æ ˆé¡¶è‹¥ä¸ºç©ºï¼Œå‡è®¾ä¼˜å…ˆçº§ä¸º0</li><li><code>å·¦æ‹¬å·</code> ä¼˜å…ˆçº§è®¾ä¸º1</li><li><code>+-</code> ä¼˜å…ˆçº§è®¾ä¸º2</li><li><code>*/</code> ä¼˜å…ˆçº§è®¾ä¸º3</li></ul></li><li>ä»å·¦å‘å³éå†ä¸­ç¼€è¡¨è¾¾å¼<ul><li>é‡åˆ°æ•°å­—ç›´æ¥è¾“å‡º</li><li>é‡åˆ°ç¬¦å· <ul><li>é‡åˆ°å·¦æ‹¬å·ï¼Œç›´æ¥å‹æ ˆ</li><li>é‡åˆ°å³æ‹¬å·ï¼Œå¼¹æ ˆè¾“å‡ºç›´åˆ°å¼¹å‡ºå·¦æ‹¬å·ï¼ˆå·¦æ‹¬å·ä¸è¾“å‡ºï¼‰</li><li>é‡åˆ°è¿ç®—ç¬¦ï¼Œæ¯”è¾ƒæ ˆé¡¶ç¬¦å·ï¼Œè‹¥è¯¥è¿ç®—ç¬¦ä¼˜å…ˆçº§å¤§äºæ ˆé¡¶ï¼Œç›´æ¥å‹æ ˆï¼›è‹¥å°äºæ ˆé¡¶ï¼Œå¼¹æ ˆè¾“å‡ºç›´åˆ°å¤§äºæ ˆé¡¶ï¼Œç„¶åå°†æ”¹è¿ç®—ç¬¦å‹æ ˆã€‚</li></ul></li></ul></li><li>æœ€åå°†ç¬¦åˆæ ˆå¼¹æ ˆå¹¶è¾“å‡º</li></ul><h3 id="åç¼€è¡¨è¾¾å¼è®¡ç®—ç»“æœ"><a href="#åç¼€è¡¨è¾¾å¼è®¡ç®—ç»“æœ" class="headerlink" title="åç¼€è¡¨è¾¾å¼è®¡ç®—ç»“æœ"></a>åç¼€è¡¨è¾¾å¼è®¡ç®—ç»“æœ</h3><ul><li>ä»å·¦å¾€å³éå†</li><li>é‡åˆ°æ•°å­—ç›´æ¥æ”¾å…¥å®¹å™¨</li><li>é‡åˆ°è¿ç®—ç¬¦ï¼Œå°†æœ€åä¸¤ä¸ªæ•°å­—å–å‡ºï¼Œè¿›è¡Œè¯¥è¿ç®—ï¼Œå°†ç»“æœå†æ”¾å…¥å®¹å™¨</li><li>éå†ç»“æŸåï¼Œå®¹å™¨ä¸­çš„æ•°å­—å³ä¸ºè¿ç®—ç»“æœ</li></ul><h3 id="å®ç°ä»£ç "><a href="#å®ç°ä»£ç " class="headerlink" title="å®ç°ä»£ç "></a>å®ç°ä»£ç </h3><p>ä»¥ä¸Šç®—æ³•ä¸éš¾å®ç°ï¼Œä¸‹é¢æ˜¯æˆ‘ä¿®æ”¹åçš„å·¥å…·ç±»ï¼Œå¯ä»¥è®¡ç®—æµ®ç‚¹æ•°çš„å…¬å¼ï¼Œç²¾ç¡®åˆ°2ä½æœ‰æ•ˆæ•°å­—<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.math.BigDecimal;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Stack;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> com.hongfund.efi.utils.RegExpUtil.FLOAT_NUMBER;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.math.BigDecimal.ZERO;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.math.RoundingMode.HALF_UP;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ•°å­¦å…¬å¼è®¡ç®—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> chenbin</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RpnUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; test = Arrays.asList(<span class="string">&quot;3 + ( 5 * ( 6 - 1 / 2 ) )&quot;</span>.split(<span class="string">&quot; &quot;</span>));</span><br><span class="line">        System.out.println(getRpn(test));</span><br><span class="line">        System.out.println(calculate(test));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¡ç®—æŒ‡å®šå…¬å¼çš„æ•°å€¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">calculate</span><span class="params">(List&lt;String&gt; formulaList)</span> </span>&#123;</span><br><span class="line">        List&lt;String&gt; rpn = getRpn(formulaList);</span><br><span class="line">        <span class="keyword">return</span> calculateRpn(rpn);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸­åºè½¬ååº</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">getRpn</span><span class="params">(List&lt;String&gt; formulaList)</span> </span>&#123;</span><br><span class="line">        Stack&lt;String&gt; operators=<span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; result = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String formula : formulaList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (formula.matches(FLOAT_NUMBER)) &#123;</span><br><span class="line">                result.add(formula);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (formula.equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">                operators.push(formula);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (formula.equals(<span class="string">&quot;)&quot;</span>)) &#123;</span><br><span class="line">                <span class="keyword">while</span> (!operators.peek().equals(<span class="string">&quot;(&quot;</span>)) &#123;</span><br><span class="line">                    result.add(operators.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                operators.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">while</span> (operators.size() != <span class="number">0</span> &amp;&amp; getLevel(operators.peek()) &gt;= getLevel(formula)) &#123;</span><br><span class="line">                    result.add(operators.pop());</span><br><span class="line">                &#125;</span><br><span class="line">                operators.push(formula);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (operators.size() != <span class="number">0</span>) &#123;</span><br><span class="line">            result.add(operators.pop());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * é€†åºè®¡ç®—ç»“æœ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> String <span class="title">calculateRpn</span><span class="params">(List&lt;String&gt; formulaList)</span> </span>&#123;</span><br><span class="line">        Stack&lt;BigDecimal&gt; s=<span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (String formula : formulaList) &#123;</span><br><span class="line">            <span class="keyword">if</span> (formula.matches(FLOAT_NUMBER)) &#123;</span><br><span class="line">                s.push(BigDecimalUtils.getDecimalValue(formula));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                BigDecimal b = s.pop();</span><br><span class="line">                BigDecimal a = s.pop();</span><br><span class="line">                BigDecimal temp = ZERO;</span><br><span class="line">                <span class="keyword">switch</span> (formula) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> : temp = a.add(b);<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> : temp = a.subtract(b);<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> : temp = a.multiply(b);<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> : temp = a.divide(b, <span class="number">2</span>, HALF_UP);<span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="string">&quot;max&quot;</span> : temp = a.max(b);<span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                s.push(temp);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> FormatUtils.DECIMAL_FORMAT_2.format(s.pop());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è¿ç®—ç¬¦ä¼˜å…ˆçº§</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getLevel</span><span class="params">(String operator)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(operator)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span> (operator) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;(&quot;</span> : <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;+&quot;</span> :</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;-&quot;</span> : <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;*&quot;</span> :</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;/&quot;</span> :</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;max&quot;</span> : <span class="keyword">return</span> <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">default</span> : <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="åˆ¤æ–­æµ®ç‚¹æ•°çš„æ­£åˆ™"><a href="#åˆ¤æ–­æµ®ç‚¹æ•°çš„æ­£åˆ™" class="headerlink" title="åˆ¤æ–­æµ®ç‚¹æ•°çš„æ­£åˆ™"></a>åˆ¤æ–­æµ®ç‚¹æ•°çš„æ­£åˆ™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ­£åˆ™è¡¨è¾¾å¼å·¥å…·ç±»</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Administrator</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegExpUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŒ¹é…æµ®ç‚¹æ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> String FLOAT_NUMBER = <span class="string">&quot;^(-?\\d+)(\\.\\d+)?$&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      Javaå®ç°æ•°å­¦å…¬å¼è®¡ç®—ï¼Œæ”¯æŒæµ®ç‚¹æ•°ï¼Œä½¿ç”¨é€†æ³¢å…°è¡¨è¾¾å¼è®¡ç®—
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Java" scheme="https://www.chenb.top/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Spring Data JPAè§£å†³æ‰¹é‡ä¿®æ”¹ä¸å”¯ä¸€ç´¢å¼•å†²çªçš„é—®é¢˜</title>
    <link href="https://www.chenb.top/2019/04/23/spring-data-jpa-multi-modify-unique-index/"/>
    <id>https://www.chenb.top/2019/04/23/spring-data-jpa-multi-modify-unique-index/</id>
    <published>2019-04-23T09:17:30.000Z</published>
    <updated>2022-01-20T02:23:10.007Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>æœ€è¿‘å‘ç°æ•°æ®åº“å‡­è¯è¡¨ä¸­æœ‰è„æ•°æ®ï¼ˆæ•°é‡ä¸å¤šï¼Œç›´æ¥æ‰‹åŠ¨ä¿®å¤äº†ï¼‰ï¼Œäºæ˜¯æƒ³åˆ°äº†åŠ å”¯ä¸€ç´¢å¼•ï¼ŒåŠ ä¸Šä¹‹åå‘ç°æœ‰ä¸ªæ‰¹é‡ä¿®æ”¹çš„åœ°æ–¹ä¸èƒ½ç”¨äº†ï¼ŒæŠ¥ç´¢å¼•å†²çªé—®é¢˜ï¼Œåªèƒ½å…ˆæ’¤å›æƒ³è§£å†³åŠæ³•</p><h3 id="ç´¢å¼•è§„çº¦"><a href="#ç´¢å¼•è§„çº¦" class="headerlink" title="ç´¢å¼•è§„çº¦"></a>ç´¢å¼•è§„çº¦</h3><p><code>å¼ºåˆ¶</code> ä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯å¤šä¸ªå­—æ®µçš„ç»„åˆï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼•ã€‚<br>è¯´æ˜ï¼šä¸è¦ä»¥ä¸ºå”¯ä¸€ç´¢å¼•å½±å“äº† insert é€Ÿåº¦ï¼Œè¿™ä¸ªé€Ÿåº¦æŸè€—å¯ä»¥å¿½ç•¥ï¼Œä½†æé«˜æŸ¥æ‰¾é€Ÿåº¦æ˜¯æ˜æ˜¾çš„ï¼›å¦å¤–ï¼Œå³ä½¿åœ¨åº”ç”¨å±‚åšäº†éå¸¸å®Œå–„çš„æ ¡éªŒæ§åˆ¶ï¼Œåªè¦æ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œæ ¹æ®å¢¨è²å®šå¾‹ï¼Œå¿…ç„¶æœ‰è„æ•°æ®äº§ç”Ÿã€‚</p><h3 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h3><p>å‘ç°JPAä¸­çš„saveæ–¹æ³•ä¸ä¼šå‘é€sqlæ›´æ–°è¯­å¥ï¼Œè¦ç­‰äº‹åŠ¡æäº¤æˆ–è€…æœ‰æ–°çš„æŸ¥è¯¢è¯­å¥éœ€è¦ç”¨åˆ°ä¹‹å‰ä¿®æ”¹çš„æ•°æ®æ—¶æ‰ä¼šæ›´æ–°åˆ°æ•°æ®åº“ï¼Œäºæ˜¯æŸ¥é˜…èµ„æ–™å’Œæºç åæ‰¾åˆ°äº†flushæ–¹æ³•ã€‚è¯¦ç»†è§£å†³è§ä»£ç </p><h3 id="è¡¨ç»“æ„"><a href="#è¡¨ç»“æ„" class="headerlink" title="è¡¨ç»“æ„"></a>è¡¨ç»“æ„</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å‡­è¯è¡¨*/</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> voucher;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> voucher(</span><br><span class="line">id <span class="type">bigint</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">account_book_id <span class="type">bigint</span>,</span><br><span class="line">accessory_no <span class="type">int</span>,</span><br><span class="line">audit_date <span class="type">date</span>,</span><br><span class="line">audit_person <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line">cash_flow_flag <span class="type">int</span>,</span><br><span class="line">category <span class="type">int</span>,</span><br><span class="line">dftotal <span class="type">decimal</span>(<span class="number">14</span>,<span class="number">2</span>),</span><br><span class="line">isassigned <span class="type">int</span>,</span><br><span class="line">jftotal <span class="type">decimal</span>(<span class="number">14</span>,<span class="number">2</span>),</span><br><span class="line">operator <span class="type">int</span>,</span><br><span class="line"><span class="keyword">period</span> <span class="type">varchar</span>(<span class="number">64</span>),</span><br><span class="line">remark <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">state <span class="type">int</span>,</span><br><span class="line">voucher_date <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">voucher_no <span class="type">varchar</span>(<span class="number">64</span>),</span><br><span class="line">written_date <span class="type">TIMESTAMP</span> <span class="keyword">default</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">written_person <span class="type">varchar</span>(<span class="number">32</span>),</span><br><span class="line"><span class="keyword">primary</span> <span class="keyword">key</span> (id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index UK_voucher <span class="keyword">on</span> voucher(account_book_id, <span class="keyword">period</span>, voucher_no);</span><br></pre></td></tr></table></figure><h3 id="åŸæ¥çš„é€»è¾‘"><a href="#åŸæ¥çš„é€»è¾‘" class="headerlink" title="åŸæ¥çš„é€»è¾‘"></a>åŸæ¥çš„é€»è¾‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">String voucherNo = voucherDto.voucherNo;</span><br><span class="line"><span class="comment">// ä¹‹åçš„æ¯å¼ å‡­è¯å·åŠ ä¸€ï¼Œå¦‚æœä¸‹ä¸€å¼ å‡­è¯å·ä¸é‡å¤äº†å°±è·³å‡º</span></span><br><span class="line"><span class="keyword">for</span> (Voucher v : vouchers) &#123;</span><br><span class="line">    <span class="keyword">if</span> (v.voucherNo.equals(voucherNo)) &#123;</span><br><span class="line">        voucherNo = getNextNo(voucherNo, VOUCHER_NO_LENGTH);</span><br><span class="line">        v.voucherNo = voucherNo;</span><br><span class="line">        voucherDao.save(v);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹åçš„é€»è¾‘"><a href="#ä¿®æ”¹åçš„é€»è¾‘" class="headerlink" title="ä¿®æ”¹åçš„é€»è¾‘"></a>ä¿®æ”¹åçš„é€»è¾‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">String voucherNo = voucherDto.voucherNo;</span><br><span class="line">List&lt;Voucher&gt; needToSaveVouchers = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">// ä¹‹åçš„æ¯å¼ å‡­è¯å·åŠ ä¸€ï¼Œå¦‚æœä¸‹ä¸€å¼ å‡­è¯å·ä¸é‡å¤äº†å°±è·³å‡º</span></span><br><span class="line"><span class="keyword">for</span> (Voucher v : vouchers) &#123;</span><br><span class="line">    <span class="keyword">if</span> (v.voucherNo.equals(voucherNo)) &#123;</span><br><span class="line">        voucherNo = getNextNo(voucherNo, VOUCHER_NO_LENGTH);</span><br><span class="line">        needToSaveVouchers.add(<span class="number">0</span>, v);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä»åå¾€å‰æ”¹ï¼Œé˜²æ­¢å”¯ä¸€ç´¢å¼•é‡å¤</span></span><br><span class="line"><span class="keyword">for</span> (Voucher v : needToSaveVouchers) &#123;</span><br><span class="line">    v.voucherNo = getNextNo(v.voucherNo, VOUCHER_NO_LENGTH);</span><br><span class="line">    voucherDao.saveAndFlush(v);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼š</p><ul><li>flush,saveAndFlushä¼šåˆ·æ–°å½“å‰sessionä¸­æ‰€æœ‰æŒä¹…åŒ–å¯¹è±¡çš„çŠ¶æ€åˆ°æ•°æ®åº“ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨æ—¶è¦è€ƒè™‘åˆ«çš„æŒä¹…åŒ–å¯¹è±¡çš„çŠ¶æ€</li><li>ä¿å­˜é¡ºåºä¸æ˜¯æŒ‰ç…§listçš„é¡ºåºï¼Œæ‰€ä»¥è¦æ‰‹åŠ¨æ§åˆ¶</li><li>flush,saveAndFlushéœ€è¦daoç»§æ‰¿<code>JpaRepository</code>æ‰èƒ½ä½¿ç”¨</li></ul>]]></content>
    
    <summary type="html">
    
      Spring Data JPAè§£å†³æ‰¹é‡ä¿®æ”¹ä¸å”¯ä¸€ç´¢å¼•å†²çªçš„é—®é¢˜
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="MySQL" scheme="https://www.chenb.top/tags/MySQL/"/>
    
      <category term="Spring Data JPA" scheme="https://www.chenb.top/tags/Spring-Data-JPA/"/>
    
  </entry>
  
  <entry>
    <title>Gitæäº¤è§„èŒƒï¼ŒGitHubè¡¨æƒ…è§„èŒƒæŒ‡å—</title>
    <link href="https://www.chenb.top/2019/04/11/git-commit-emoji/"/>
    <id>https://www.chenb.top/2019/04/11/git-commit-emoji/</id>
    <published>2019-04-11T08:42:33.000Z</published>
    <updated>2022-01-20T02:23:10.007Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>ä½¿ç”¨gitå¾ˆä¹…äº†ä¸€ç›´éƒ½éšä¾¿å†™commitä¿¡æ¯ï¼Œå¯¼è‡´æŸ¥çœ‹å†å²æ—¶æ¯”è¾ƒæ··ä¹±ï¼Œæ‰€ä»¥æœé›†äº†ç½‘ä¸Šçš„æäº¤è§„èŒƒï¼Œæ‘˜å½•åˆ°è¿™é‡Œå¤‡ç”¨</p><h3 id="æäº¤è§„èŒƒ"><a href="#æäº¤è§„èŒƒ" class="headerlink" title="æäº¤è§„èŒƒ"></a>æäº¤è§„èŒƒ</h3><p>æ ¼å¼ï¼šæ‹¬å·ä¸­éƒ¨åˆ†çš„å¯ä»¥çœç•¥<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">type</span>&gt;</span>(<span class="tag">&lt;<span class="name">scope</span>&gt;</span>): <span class="tag">&lt;<span class="name">subject</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line">(<span class="tag">&lt;<span class="name">body</span>&gt;</span>)</span><br><span class="line"><span class="tag">&lt;<span class="name">BLANK</span> <span class="attr">LINE</span>&gt;</span></span><br><span class="line">(<span class="tag">&lt;<span class="name">footer</span>&gt;</span>)</span><br></pre></td></tr></table></figure></p><ul><li>header: åªæœ‰ä¸€è¡Œï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼štypeã€scopeã€subject<ul><li>type: æäº¤çš„ç±»åˆ«</li><li>scope: å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚ç­‰ç­‰ï¼ˆå¯ç©ºï¼‰</li><li>subject: æè¿°</li></ul></li><li>body: æäº¤çš„ç±»åˆ«ï¼ˆå¯ç©ºï¼‰</li><li>footer: ä¸å…¼å®¹å˜åŠ¨ã€Close Issueã€Revertç­‰</li></ul><p>typeçš„ç±»å‹ï¼š</p><table><thead><tr><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td>feat</td><td>æ–°åŠŸèƒ½ï¼ˆfeatureï¼‰</td></tr><tr><td>fix</td><td>ä¿®è¡¥bug</td></tr><tr><td>docs</td><td>æ–‡æ¡£ï¼ˆdocumentationï¼‰</td></tr><tr><td>style</td><td>æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰</td></tr><tr><td>refactor</td><td>é‡æ„ï¼ˆå³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ï¼‰</td></tr><tr><td>test</td><td>å¢åŠ æµ‹è¯•</td></tr><tr><td>chore</td><td>æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨</td></tr></tbody></table><h3 id="GitHubè¡¨æƒ…æŒ‡å—"><a href="#GitHubè¡¨æƒ…æŒ‡å—" class="headerlink" title="GitHubè¡¨æƒ…æŒ‡å—"></a>GitHubè¡¨æƒ…æŒ‡å—</h3><table><thead><tr><th>emoji</th><th>emoji ä»£ç </th><th>commit è¯´æ˜</th></tr></thead><tbody><tr><td>ğŸ‰ (åº†ç¥)</td><td>:tada:</td><td>åˆæ¬¡æäº¤</td></tr><tr><td>âœ¨ (ç«èŠ±)</td><td>:sparkles:</td><td>å¼•å…¥æ–°åŠŸèƒ½</td></tr><tr><td>ğŸ”– (ä¹¦ç­¾)</td><td>:bookmark:</td><td>å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾</td></tr><tr><td>ğŸ› (bug)</td><td>:bug:</td><td>ä¿®å¤ bug</td></tr><tr><td>ğŸš‘ (æ€¥æ•‘è½¦)</td><td>:ambulance:</td><td>é‡è¦è¡¥ä¸</td></tr><tr><td>ğŸŒ (åœ°çƒ)</td><td>:globe_with_meridians:</td><td>å›½é™…åŒ–ä¸æœ¬åœ°åŒ–</td></tr><tr><td>ğŸ’„ (å£çº¢)</td><td>:lipstick:</td><td>æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶</td></tr><tr><td>ğŸ¬ (åœºè®°æ¿)</td><td>:clapper:</td><td>æ›´æ–°æ¼”ç¤º/ç¤ºä¾‹</td></tr><tr><td>ğŸš¨ (è­¦è½¦ç¯)</td><td>:rotating_light:</td><td>ç§»é™¤ linter è­¦å‘Š</td></tr><tr><td>ğŸ”§ (æ‰³æ‰‹)</td><td>:wrench:</td><td>ä¿®æ”¹é…ç½®æ–‡ä»¶</td></tr><tr><td>â• (åŠ å·)</td><td>:heavy_plus_sign:</td><td>å¢åŠ ä¸€ä¸ªä¾èµ–</td></tr><tr><td>â– (å‡å·)</td><td>:heavy_minus_sign:</td><td>å‡å°‘ä¸€ä¸ªä¾èµ–</td></tr><tr><td>â¬†ï¸ (ä¸Šå‡ç®­å¤´)</td><td>:arrow_up:</td><td>å‡çº§ä¾èµ–</td></tr><tr><td>â¬‡ï¸ (ä¸‹é™ç®­å¤´)</td><td>:arrow_down:</td><td>é™çº§ä¾èµ–</td></tr><tr><td>âš¡ï¸ (é—ªç”µ)</td><td>:zap:</td><td>æå‡æ€§èƒ½</td></tr><tr><td>ğŸ (èµ›é©¬)</td><td>:racehorse:</td><td>æå‡æ€§èƒ½</td></tr><tr><td>ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾)</td><td>:chart_with_upwards_trend:</td><td>æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç </td></tr><tr><td>ğŸš€ (ç«ç®­)</td><td>:rocket:</td><td>éƒ¨ç½²åŠŸèƒ½</td></tr><tr><td>âœ… (ç™½è‰²å¤é€‰æ¡†)</td><td>:white_check_mark:</td><td>å¢åŠ æµ‹è¯•</td></tr><tr><td>ğŸ“ (å¤‡å¿˜å½•)</td><td>:memo:</td><td>æ’°å†™æ–‡æ¡£</td></tr><tr><td>ğŸ”¨ (é”¤å­)</td><td>:hammer:</td><td>é‡å¤§é‡æ„</td></tr><tr><td>ğŸ¨ (è°ƒè‰²æ¿)</td><td>:art:</td><td>æ”¹è¿›ä»£ç ç»“æ„/ä»£ç æ ¼å¼</td></tr><tr><td>ğŸ”¥ (ç«ç„°)</td><td>:fire:</td><td>ç§»é™¤ä»£ç æˆ–æ–‡ä»¶</td></tr><tr><td>âœï¸ (é“…ç¬”)</td><td>:pencil2:</td><td>ä¿®å¤ typo</td></tr><tr><td>ğŸš§ (æ–½å·¥)</td><td>:construction:</td><td>å·¥ä½œè¿›è¡Œä¸­</td></tr><tr><td>ğŸ‘· (å·¥äºº)</td><td>:construction_worker:</td><td>æ·»åŠ  CI æ„å»ºç³»ç»Ÿ</td></tr><tr><td>ğŸ’š (ç»¿å¿ƒ)</td><td>:green_heart:</td><td>ä¿®å¤ CI æ„å»ºé—®é¢˜</td></tr><tr><td>ğŸ”’ (é”)</td><td>:lock:</td><td>ä¿®å¤å®‰å…¨é—®é¢˜</td></tr><tr><td>ğŸ³ (é²¸é±¼)</td><td>:whale:</td><td>Docker ç›¸å…³å·¥ä½œ</td></tr><tr><td>ğŸ (è‹¹æœ)</td><td>:apple:</td><td>ä¿®å¤ macOS ä¸‹çš„é—®é¢˜</td></tr><tr><td>ğŸ§ (ä¼é¹…)</td><td>:penguin:</td><td>ä¿®å¤ Linux ä¸‹çš„é—®é¢˜</td></tr><tr><td>ğŸ (æ——å¸œ)</td><td>:checked_flag:</td><td>ä¿®å¤ Windows ä¸‹çš„é—®é¢˜</td></tr></tbody></table><p>åŸé¡¹ç›®é“¾æ¥ï¼š<a href="https://github.com/liuchengxu/git-commit-emoji-cn">git commit message emoji ä½¿ç”¨æŒ‡å—</a><br>å‚è€ƒï¼š<a href="https://gitmoji.carloscuesta.me/">gitmoji</a></p>]]></content>
    
    <summary type="html">
    
      gitæäº¤è§„èŒƒï¼ŒGitHubè¡¨æƒ…è§„èŒƒæŒ‡å—
    
    </summary>
    
      <category term="æŠ€æœ¯æ€»ç»“" scheme="https://www.chenb.top/categories/%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/"/>
    
    
      <category term="Git" scheme="https://www.chenb.top/tags/Git/"/>
    
  </entry>
  
</feed>
